{
  "id": "4e2ce943-4931-48d4-bf8e-80dcded540d7",
  "revision": 0,
  "last_node_id": 751,
  "last_link_id": 1156,
  "nodes": [
    {
      "id": 423,
      "type": "GetNode",
      "pos": [
        -6010,
        4990
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            561
          ]
        }
      ],
      "title": "Get_height",
      "properties": {},
      "widgets_values": [
        "height"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 11,
      "type": "SetNode",
      "pos": [
        -6230,
        3580
      ],
      "size": [
        210,
        50
      ],
      "flags": {
        "collapsed": true
      },
      "order": 77,
      "mode": 0,
      "inputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "link": 9
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_positive_prompt",
      "properties": {
        "previousName": "positive_prompt"
      },
      "widgets_values": [
        "positive_prompt"
      ]
    },
    {
      "id": 418,
      "type": "SetNode",
      "pos": [
        -6230,
        3710
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 75,
      "mode": 0,
      "inputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "link": 535
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_negative_prompt",
      "properties": {
        "previousName": "negative_prompt"
      },
      "widgets_values": [
        "negative_prompt"
      ]
    },
    {
      "id": 3,
      "type": "SetNode",
      "pos": [
        -6150,
        3870
      ],
      "size": [
        210,
        50
      ],
      "flags": {
        "collapsed": true
      },
      "order": 78,
      "mode": 0,
      "inputs": [
        {
          "name": "INT",
          "type": "INT",
          "link": 3
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_context_frames",
      "properties": {
        "previousName": ""
      },
      "widgets_values": [
        "context_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 9,
      "type": "mxSlider",
      "pos": [
        -6500,
        3980
      ],
      "size": [
        320,
        30
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "INT",
          "links": [
            5
          ]
        }
      ],
      "title": "New Frames",
      "properties": {
        "Node name for S&R": "mxSlider",
        "value": 0,
        "min": 0,
        "max": 200,
        "step": 4,
        "decimals": 0,
        "snap": true,
        "cnr_id": "comfyui-mxtoolkit",
        "ver": "0.9.92"
      },
      "widgets_values": [
        0,
        0,
        0
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 5,
      "type": "SetNode",
      "pos": [
        -6150,
        4010
      ],
      "size": [
        210,
        50
      ],
      "flags": {
        "collapsed": true
      },
      "order": 74,
      "mode": 0,
      "inputs": [
        {
          "name": "INT",
          "type": "INT",
          "link": 5
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_new_frames",
      "properties": {
        "previousName": "new_frames"
      },
      "widgets_values": [
        "new_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 4,
      "type": "SetNode",
      "pos": [
        -6150,
        3940
      ],
      "size": [
        210,
        34
      ],
      "flags": {
        "collapsed": true
      },
      "order": 91,
      "mode": 0,
      "inputs": [
        {
          "name": "INT",
          "type": "INT",
          "link": 4
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_replace_frames",
      "properties": {
        "previousName": ""
      },
      "widgets_values": [
        "replace_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 419,
      "type": "GetNode",
      "pos": [
        -6010,
        5070
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            564
          ]
        }
      ],
      "title": "Get_negative_prompt",
      "properties": {},
      "widgets_values": [
        "negative_prompt"
      ]
    },
    {
      "id": 420,
      "type": "GetNode",
      "pos": [
        -6010,
        4950
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            560
          ]
        }
      ],
      "title": "Get_width",
      "properties": {},
      "widgets_values": [
        "width"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 428,
      "type": "SetNode",
      "pos": [
        -5420,
        3590
      ],
      "size": [
        210,
        34
      ],
      "flags": {
        "collapsed": true
      },
      "order": 92,
      "mode": 0,
      "inputs": [
        {
          "name": "INT",
          "type": "INT",
          "link": 1071
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_seed",
      "properties": {
        "previousName": "seed"
      },
      "widgets_values": [
        "seed"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 2,
      "type": "SetNode",
      "pos": [
        -6150,
        4240
      ],
      "size": [
        210,
        50
      ],
      "flags": {
        "collapsed": true
      },
      "order": 82,
      "mode": 0,
      "inputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "link": 2
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": []
        }
      ],
      "title": "Set_project_name",
      "properties": {
        "previousName": ""
      },
      "widgets_values": [
        "project_name"
      ]
    },
    {
      "id": 1,
      "type": "SetNode",
      "pos": [
        -6150,
        4150
      ],
      "size": [
        210,
        50
      ],
      "flags": {
        "collapsed": true
      },
      "order": 81,
      "mode": 0,
      "inputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "link": 1
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": []
        }
      ],
      "title": "Set_input_path",
      "properties": {
        "previousName": ""
      },
      "widgets_values": [
        "input_path"
      ]
    },
    {
      "id": 574,
      "type": "SetNode",
      "pos": [
        -5400,
        3860
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 94,
      "mode": 0,
      "inputs": [
        {
          "name": "INT",
          "type": "INT",
          "link": 868
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_index",
      "properties": {
        "previousName": "index"
      },
      "widgets_values": [
        "index"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 456,
      "type": "GetNode",
      "pos": [
        -4240,
        4550
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            871
          ]
        }
      ],
      "title": "Get_control_video",
      "properties": {},
      "widgets_values": [
        "control_video"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 597,
      "type": "SetNode",
      "pos": [
        -4700,
        4050
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 88,
      "mode": 0,
      "inputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "link": 876
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_cross_fade",
      "properties": {
        "previousName": "cross_fade"
      },
      "widgets_values": [
        "cross_fade"
      ]
    },
    {
      "id": 417,
      "type": "PrimitiveStringMultiline",
      "pos": [
        -6490,
        3680
      ],
      "size": [
        230,
        90
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            535
          ]
        }
      ],
      "title": "Negative Prompt (optional)",
      "properties": {
        "Node name for S&R": "PrimitiveStringMultiline",
        "cnr_id": "comfy-core",
        "ver": "0.3.62"
      },
      "widgets_values": [
        ""
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 596,
      "type": "SetNode",
      "pos": [
        -4720,
        3610
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 76,
      "mode": 0,
      "inputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "link": 875
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_color_match",
      "properties": {
        "previousName": "color_match"
      },
      "widgets_values": [
        "color_match"
      ]
    },
    {
      "id": 594,
      "type": "PrimitiveBoolean",
      "pos": [
        -5010,
        3580
      ],
      "size": [
        270,
        60
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "label": "enable_color_match",
          "name": "value",
          "type": "BOOLEAN",
          "widget": {
            "name": "value"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            875
          ]
        }
      ],
      "title": "Post-Processing: Color Match",
      "properties": {
        "Node name for S&R": "PrimitiveBoolean",
        "cnr_id": "comfy-core",
        "ver": "0.4.0"
      },
      "widgets_values": [
        false
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 12,
      "type": "PrimitiveStringMultiline",
      "pos": [
        -6490,
        3550
      ],
      "size": [
        230,
        90
      ],
      "flags": {
        "collapsed": false
      },
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            9
          ]
        }
      ],
      "title": "Positive Prompt (optional)",
      "properties": {
        "Node name for S&R": "PrimitiveStringMultiline",
        "cnr_id": "comfy-core",
        "ver": "0.3.62"
      },
      "widgets_values": [
        ""
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 590,
      "type": "MarkdownNote",
      "pos": [
        -5010,
        3680
      ],
      "size": [
        450,
        170
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Color Match",
      "properties": {},
      "widgets_values": [
        "# Color Match\n## Match the colors of every VACE-generated frame to the colors of the last context frame from the original video.\nI honestly don't know how effective this is, or whether it works at all, but it doesn't seem to do any harm when I enable it. People have suggested that various color match schemes help them with VACE color/brightness shifts, so here is a reference implementation that you can try and alter to fit your needs."
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 457,
      "type": "GetNode",
      "pos": [
        -4240,
        4630
      ],
      "size": [
        210,
        58
      ],
      "flags": {
        "collapsed": true
      },
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            872,
            879
          ]
        }
      ],
      "title": "Get_vace_output",
      "properties": {},
      "widgets_values": [
        "vace_output"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 599,
      "type": "GetNode",
      "pos": [
        -3910,
        4700
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            877
          ]
        }
      ],
      "title": "Get_color_match",
      "properties": {},
      "widgets_values": [
        "color_match"
      ]
    },
    {
      "id": 602,
      "type": "GetNode",
      "pos": [
        -3360,
        4600
      ],
      "size": [
        210,
        50
      ],
      "flags": {
        "collapsed": true
      },
      "order": 11,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            885
          ]
        }
      ],
      "title": "Get_context_frames",
      "properties": {},
      "widgets_values": [
        "context_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 575,
      "type": "Label (rgthree)",
      "pos": [
        -6510,
        3360
      ],
      "size": [
        280.18333435058594,
        88
      ],
      "flags": {
        "pinned": true,
        "allow_interaction": false
      },
      "order": 12,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Version 2.3",
      "properties": {
        "fontSize": 48,
        "fontFamily": "Arial",
        "fontColor": "black",
        "textAlign": "left",
        "backgroundColor": "#eedc82",
        "padding": 20,
        "borderRadius": 30,
        "angle": 0
      },
      "color": "#fff0",
      "bgcolor": "#fff0"
    },
    {
      "id": 492,
      "type": "MarkdownNote",
      "pos": [
        -6510,
        5630
      ],
      "size": [
        390,
        210
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Alternate Sampler Subgraphs",
      "properties": {},
      "widgets_values": [
        "# Alternate Sampler Setups\n\n## Samplers and model optimizations have been isolated so it's relatively easy to customize or swap configurations without affecting the rest of the workflow.\n\n- The Wan 2.1 VACE subgraph is presented here as an example. You can use any sampler configuration that makes you feel good, though.\n- Ideally, the model and sampler setup you use in this workflow should closely resemble whatever setup you use in your normal Wan generation workflow. *Don't assume my defaults will work well on your system!* "
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 413,
      "type": "GetNode",
      "pos": [
        -6040,
        4910
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 14,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            559
          ]
        }
      ],
      "title": "Get_control_mask",
      "properties": {},
      "widgets_values": [
        "control_mask"
      ],
      "color": "#1c5715",
      "bgcolor": "#1f401b"
    },
    {
      "id": 412,
      "type": "GetNode",
      "pos": [
        -6040,
        4870
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 15,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            630
          ]
        }
      ],
      "title": "Get_control_video",
      "properties": {},
      "widgets_values": [
        "control_video"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 426,
      "type": "GetNode",
      "pos": [
        -5930,
        5150
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 16,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            563
          ]
        }
      ],
      "title": "Get_seed",
      "properties": {},
      "widgets_values": [
        "seed"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 416,
      "type": "GetNode",
      "pos": [
        -6000,
        5110
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 17,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            565
          ]
        }
      ],
      "title": "Get_positive_prompt",
      "properties": {},
      "widgets_values": [
        "positive_prompt"
      ]
    },
    {
      "id": 10,
      "type": "mxSlider",
      "pos": [
        -6500,
        3840
      ],
      "size": [
        320,
        30
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "INT",
          "links": [
            3
          ]
        }
      ],
      "title": "Context Frames",
      "properties": {
        "Node name for S&R": "mxSlider",
        "value": 8,
        "min": 4,
        "max": 40,
        "step": 4,
        "decimals": 0,
        "snap": true,
        "cnr_id": "comfyui-mxtoolkit",
        "ver": "0.9.92"
      },
      "widgets_values": [
        8,
        8,
        0
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 430,
      "type": "GetNode",
      "pos": [
        -4230,
        4310
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 19,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            1148
          ]
        }
      ],
      "title": "Get_new_frames",
      "properties": {},
      "widgets_values": [
        "new_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 666,
      "type": "SetNode",
      "pos": [
        -3530,
        4050
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 102,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 1117
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_control_video",
      "properties": {
        "previousName": "control_video"
      },
      "widgets_values": [
        "control_video"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 665,
      "type": "SetNode",
      "pos": [
        -2680,
        3640
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 122,
      "mode": 0,
      "inputs": [
        {
          "name": "FLOAT",
          "type": "FLOAT",
          "link": 994
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_fps",
      "properties": {
        "previousName": "fps"
      },
      "widgets_values": [
        "fps"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 422,
      "type": "SetNode",
      "pos": [
        -2680,
        3720
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 124,
      "mode": 0,
      "inputs": [
        {
          "name": "INT",
          "type": "INT",
          "link": 993
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_height",
      "properties": {
        "previousName": "height"
      },
      "widgets_values": [
        "height"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 658,
      "type": "SetNode",
      "pos": [
        -3420,
        3700
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 108,
      "mode": 0,
      "inputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "link": 1141
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": []
        }
      ],
      "title": "Set_workfile_prefix",
      "properties": {
        "previousName": "workfile_prefix"
      },
      "widgets_values": [
        "workfile_prefix"
      ]
    },
    {
      "id": 664,
      "type": "VHS_VideoInfoLoaded",
      "pos": [
        -2860,
        3680
      ],
      "size": [
        190.66666412353516,
        106
      ],
      "flags": {
        "collapsed": true
      },
      "order": 117,
      "mode": 0,
      "inputs": [
        {
          "name": "video_info",
          "type": "VHS_VIDEOINFO",
          "link": 986
        }
      ],
      "outputs": [
        {
          "name": "fpsüü¶",
          "type": "FLOAT",
          "links": [
            994
          ]
        },
        {
          "name": "frame_countüü¶",
          "type": "INT",
          "links": []
        },
        {
          "name": "durationüü¶",
          "type": "FLOAT",
          "links": []
        },
        {
          "name": "widthüü¶",
          "type": "INT",
          "links": [
            992
          ]
        },
        {
          "name": "heightüü¶",
          "type": "INT",
          "links": [
            993
          ]
        }
      ],
      "title": "Video Info",
      "properties": {
        "Node name for S&R": "VHS_VideoInfoLoaded",
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "537f3a02269e14ab4b0350d4189a52034e9a3b12"
      },
      "widgets_values": {},
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 421,
      "type": "SetNode",
      "pos": [
        -2680,
        3680
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 123,
      "mode": 0,
      "inputs": [
        {
          "name": "INT",
          "type": "INT",
          "link": 992
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_width",
      "properties": {
        "previousName": "width"
      },
      "widgets_values": [
        "width"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 53,
      "type": "GetNode",
      "pos": [
        -4240,
        3720
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 20,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            343,
            1136
          ]
        }
      ],
      "title": "Get_input_path",
      "properties": {},
      "widgets_values": [
        "input_path"
      ]
    },
    {
      "id": 323,
      "type": "GetNode",
      "pos": [
        -4230,
        4230
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 21,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            1021
          ]
        }
      ],
      "title": "Get_context_frames",
      "properties": {},
      "widgets_values": [
        "context_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 322,
      "type": "GetNode",
      "pos": [
        -4230,
        4270
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 22,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            1022
          ]
        }
      ],
      "title": "Get_replace_frames",
      "properties": {},
      "widgets_values": [
        "replace_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 692,
      "type": "GetNode",
      "pos": [
        -4230,
        4110
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 23,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1048
          ]
        }
      ],
      "title": "Get_video2",
      "properties": {},
      "widgets_values": [
        "video2"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 691,
      "type": "GetNode",
      "pos": [
        -4230,
        4070
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 24,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1047
          ]
        }
      ],
      "title": "Get_video1",
      "properties": {},
      "widgets_values": [
        "video1"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 651,
      "type": "GetNode",
      "pos": [
        -4040,
        3850
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 25,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            1137
          ]
        }
      ],
      "title": "Get_project_name",
      "properties": {},
      "widgets_values": [
        "project_name"
      ]
    },
    {
      "id": 627,
      "type": "StringConcatenate",
      "pos": [
        -3490,
        5030
      ],
      "size": [
        210,
        170
      ],
      "flags": {
        "collapsed": true
      },
      "order": 86,
      "mode": 0,
      "inputs": [
        {
          "name": "string_a",
          "type": "STRING",
          "widget": {
            "name": "string_a"
          },
          "link": 1065
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            905
          ]
        }
      ],
      "title": "_clip2",
      "properties": {
        "Node name for S&R": "StringConcatenate",
        "cnr_id": "comfy-core",
        "ver": "0.5.1"
      },
      "widgets_values": [
        "",
        "clip2",
        "_"
      ]
    },
    {
      "id": 698,
      "type": "GetNode",
      "pos": [
        -3510,
        4900
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 26,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": [
            1054
          ]
        }
      ],
      "title": "Get_clip2",
      "properties": {},
      "widgets_values": [
        "clip2"
      ]
    },
    {
      "id": 672,
      "type": "StringConcatenate",
      "pos": [
        -3000,
        5090
      ],
      "size": [
        210,
        166
      ],
      "flags": {
        "collapsed": true
      },
      "order": 87,
      "mode": 0,
      "inputs": [
        {
          "name": "string_a",
          "type": "STRING",
          "widget": {
            "name": "string_a"
          },
          "link": 1067
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            1009
          ]
        }
      ],
      "title": "_clip3",
      "properties": {
        "Node name for S&R": "StringConcatenate",
        "cnr_id": "comfy-core",
        "ver": "0.12.2"
      },
      "widgets_values": [
        "",
        "clip3",
        "_"
      ]
    },
    {
      "id": 683,
      "type": "GetNode",
      "pos": [
        -3030,
        5380
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 27,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            1155
          ]
        }
      ],
      "title": "Get_is_last",
      "properties": {},
      "widgets_values": [
        "is_last"
      ]
    },
    {
      "id": 670,
      "type": "StringConcatenate",
      "pos": [
        -3950,
        5050
      ],
      "size": [
        210,
        166
      ],
      "flags": {
        "collapsed": true
      },
      "order": 85,
      "mode": 0,
      "inputs": [
        {
          "name": "string_a",
          "type": "STRING",
          "widget": {
            "name": "string_a"
          },
          "link": 1006
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            1007
          ]
        }
      ],
      "title": "_clip1",
      "properties": {
        "Node name for S&R": "StringConcatenate",
        "cnr_id": "comfy-core",
        "ver": "0.12.2"
      },
      "widgets_values": [
        "",
        "clip1",
        "_"
      ]
    },
    {
      "id": 267,
      "type": "9f21363a-eb71-41d2-a35a-b3d150e1b355",
      "pos": [
        -4040,
        3630
      ],
      "size": [
        210,
        58
      ],
      "flags": {
        "collapsed": false
      },
      "order": 79,
      "mode": 0,
      "inputs": [
        {
          "name": "path",
          "type": "STRING",
          "widget": {
            "name": "path"
          },
          "link": 343
        }
      ],
      "outputs": [
        {
          "label": "filtered_list",
          "name": "result",
          "type": "*",
          "links": [
            1135
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "-1",
            "path"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.3.62"
      },
      "widgets_values": [
        ""
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 685,
      "type": "GetNode",
      "pos": [
        -4230,
        4150
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 28,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            1146
          ]
        }
      ],
      "title": "Get_is_first",
      "properties": {},
      "widgets_values": [
        "is_first"
      ]
    },
    {
      "id": 690,
      "type": "SetNode",
      "pos": [
        -2840,
        3610
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 116,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 1116
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_video1",
      "properties": {
        "previousName": "video1"
      },
      "widgets_values": [
        "video1"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 697,
      "type": "SetNode",
      "pos": [
        -2640,
        4640
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 125,
      "mode": 0,
      "inputs": [
        {
          "name": "*",
          "type": "*",
          "link": 1053
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_clip2",
      "properties": {
        "previousName": "clip2"
      },
      "widgets_values": [
        "clip2"
      ]
    },
    {
      "id": 600,
      "type": "Basic data handling: IfElse",
      "pos": [
        -2880,
        4610
      ],
      "size": [
        210,
        78
      ],
      "flags": {},
      "order": 119,
      "mode": 0,
      "inputs": [
        {
          "name": "if_true",
          "type": "*",
          "link": 882
        },
        {
          "name": "if_false",
          "type": "*",
          "link": 884
        },
        {
          "name": "condition",
          "type": "BOOLEAN",
          "widget": {
            "name": "condition"
          },
          "link": 881
        }
      ],
      "outputs": [
        {
          "name": "result",
          "type": "*",
          "links": [
            1053
          ]
        }
      ],
      "title": "cross fade?",
      "properties": {
        "Node name for S&R": "Basic data handling: IfElse",
        "cnr_id": "basic_data_handling",
        "ver": "1.0.0"
      },
      "widgets_values": [
        false
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 601,
      "type": "GetNode",
      "pos": [
        -3060,
        4690
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 29,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            881
          ]
        }
      ],
      "title": "Get_cross_fade",
      "properties": {},
      "widgets_values": [
        "cross_fade"
      ]
    },
    {
      "id": 604,
      "type": "GetNode",
      "pos": [
        -3360,
        4560
      ],
      "size": [
        210,
        50
      ],
      "flags": {
        "collapsed": true
      },
      "order": 30,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1113
          ]
        }
      ],
      "title": "Get_control_video",
      "properties": {},
      "widgets_values": [
        "control_video"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 598,
      "type": "Basic data handling: IfElse",
      "pos": [
        -3660,
        4580
      ],
      "size": [
        210,
        78
      ],
      "flags": {},
      "order": 96,
      "mode": 0,
      "inputs": [
        {
          "name": "if_true",
          "type": "*",
          "link": 878
        },
        {
          "name": "if_false",
          "type": "*",
          "link": 879
        },
        {
          "name": "condition",
          "type": "BOOLEAN",
          "widget": {
            "name": "condition"
          },
          "link": 877
        }
      ],
      "outputs": [
        {
          "name": "result",
          "type": "*",
          "links": [
            880,
            884
          ]
        }
      ],
      "title": "color match?",
      "properties": {
        "Node name for S&R": "Basic data handling: IfElse",
        "cnr_id": "basic_data_handling",
        "ver": "1.0.0"
      },
      "widgets_values": [
        false
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 587,
      "type": "7accba7e-fd35-4b6c-8f67-b4b565869a78",
      "pos": [
        -3960,
        4530
      ],
      "size": [
        210,
        126
      ],
      "flags": {},
      "order": 80,
      "mode": 0,
      "inputs": [
        {
          "label": "control_video",
          "name": "images",
          "type": "IMAGE",
          "link": 871
        },
        {
          "label": "context_frames",
          "name": "value",
          "type": "INT",
          "widget": {
            "name": "value"
          },
          "link": 873
        },
        {
          "label": "vace_output",
          "name": "images_1",
          "type": "IMAGE",
          "link": 872
        }
      ],
      "outputs": [
        {
          "label": "vace_output",
          "name": "image",
          "type": "IMAGE",
          "links": [
            878
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "-1",
            "value"
          ],
          [
            "586",
            "method"
          ],
          [
            "586",
            "strength"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.4.0"
      },
      "widgets_values": [
        0
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 485,
      "type": "GetNode",
      "pos": [
        -4240,
        4590
      ],
      "size": [
        210,
        50
      ],
      "flags": {
        "collapsed": true
      },
      "order": 31,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            873
          ]
        }
      ],
      "title": "Get_context_frames",
      "properties": {},
      "widgets_values": [
        "context_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 708,
      "type": "VAELoader",
      "pos": [
        -6490,
        4810
      ],
      "size": [
        420,
        58
      ],
      "flags": {},
      "order": 32,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            1075
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "VAELoader",
        "cnr_id": "comfy-core",
        "ver": "0.12.2"
      },
      "widgets_values": [
        "wan_2.1_vae.safetensors"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 489,
      "type": "MarkdownNote",
      "pos": [
        -6500,
        4940
      ],
      "size": [
        430,
        360
      ],
      "flags": {},
      "order": 33,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "üëÜ  Models üëÜ",
      "properties": {},
      "widgets_values": [
        "# Select your preferred Wan VACE, CLIP and VAE models here\n## Select a VACE model of the same model type you run in your regular Wan generation workflow.\n- *The key to success and no OOM is to configure this workflow as close to your regular Wan workflow as possible.*\n## If you need GGUF models, replace these nodes with your favorite GGUF loaders. \n## You can load **Wan 2.1 VACE** too, either safetensors or GGUF.\n- Be sure to hook up the **Wan 2.1** sampler subgraph."
      ],
      "color": "#146e47",
      "bgcolor": "#005a33"
    },
    {
      "id": 442,
      "type": "SetNode",
      "pos": [
        -4990,
        4560
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 101,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 1114
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_vace_output",
      "properties": {
        "previousName": "vace_output"
      },
      "widgets_values": [
        "vace_output"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 491,
      "type": "MarkdownNote",
      "pos": [
        -5000,
        4620
      ],
      "size": [
        390,
        100
      ],
      "flags": {},
      "order": 34,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Sampler Settings",
      "properties": {},
      "widgets_values": [
        "# Sampler Settings\nThe sampler(s) are in this subgraph if you want to make changes to parameters that are not exposed in the UI, like number of steps, CFG, scheduler, sampler, etc. "
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 435,
      "type": "80597ad3-cf64-4c5c-aeaf-fa576a7520db",
      "pos": [
        -5680,
        4530
      ],
      "size": [
        650,
        838.375
      ],
      "flags": {},
      "order": 89,
      "mode": 0,
      "inputs": [
        {
          "label": "model_high",
          "name": "model",
          "type": "MODEL",
          "link": 1072
        },
        {
          "label": "model_low",
          "name": "model_1",
          "type": "MODEL",
          "link": 1073
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": 1074
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 1075
        },
        {
          "label": "control_video",
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 630
        },
        {
          "label": "control_mask",
          "name": "MASK",
          "type": "MASK",
          "link": 559
        },
        {
          "label": "positive_prompt",
          "name": "value",
          "type": "STRING",
          "widget": {
            "name": "value"
          },
          "link": 565
        },
        {
          "label": "negative_prompt",
          "name": "value_1",
          "type": "STRING",
          "widget": {
            "name": "value_1"
          },
          "link": 564
        },
        {
          "label": "width",
          "name": "value_2",
          "type": "INT",
          "widget": {
            "name": "value_2"
          },
          "link": 560
        },
        {
          "label": "height",
          "name": "value_3",
          "type": "INT",
          "widget": {
            "name": "value_3"
          },
          "link": 561
        },
        {
          "label": "length",
          "name": "value_4",
          "type": "INT",
          "widget": {
            "name": "value_4"
          },
          "link": 1028
        },
        {
          "label": "seed",
          "name": "value_7",
          "type": "INT",
          "widget": {
            "name": "value_7"
          },
          "link": 563
        },
        {
          "label": "‚û°Ô∏èenable_torch_compile",
          "name": "value_8",
          "type": "BOOLEAN",
          "widget": {
            "name": "value_8"
          },
          "link": null
        },
        {
          "label": "‚û°Ô∏èsage_attention",
          "name": "value_9",
          "type": "BOOLEAN",
          "widget": {
            "name": "value_9"
          },
          "link": null
        },
        {
          "label": "‚û°Ô∏ènag",
          "name": "value_10",
          "type": "BOOLEAN",
          "widget": {
            "name": "value_10"
          },
          "link": null
        },
        {
          "label": "‚û°Ô∏èlightx2v",
          "name": "value_11",
          "type": "BOOLEAN",
          "widget": {
            "name": "value_11"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "image",
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1114
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "-1",
            "value_2"
          ],
          [
            "-1",
            "value_3"
          ],
          [
            "-1",
            "value_4"
          ],
          [
            "-1",
            "value_1"
          ],
          [
            "-1",
            "value"
          ],
          [
            "-1",
            "value_7"
          ],
          [
            "-1",
            "value_9"
          ],
          [
            "-1",
            "value_8"
          ],
          [
            "-1",
            "value_10"
          ],
          [
            "-1",
            "value_11"
          ],
          [
            "319",
            "lora_name"
          ],
          [
            "319",
            "strength_model"
          ],
          [
            "320",
            "lora_name"
          ],
          [
            "320",
            "strength_model"
          ],
          [
            "-1",
            "vhslatentpreview"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.3.59"
      },
      "widgets_values": [
        0,
        0,
        0,
        "",
        "",
        0,
        false,
        false,
        false,
        true
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 425,
      "type": "GetNode",
      "pos": [
        -6010,
        5030
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 35,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            1028
          ]
        }
      ],
      "title": "Get_vace_frames",
      "properties": {},
      "widgets_values": [
        "vace_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 490,
      "type": "MarkdownNote",
      "pos": [
        -4990,
        4830
      ],
      "size": [
        400,
        380
      ],
      "flags": {},
      "order": 36,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "üëà  Inference Optimizations  üëà",
      "properties": {},
      "widgets_values": [
        "# Enable Optimizations Here\n## Sage attention and Torch Compile\n- If your environment supports these.\n## Normalized Attention Guidance (**NAG**)\n- For negative prompting at CFG=1.\n## Lightx2v \n- For fewer inference steps at the expense of motion quality.  \n- Select your high and low lora files in the widgets here.  \n- Set the lora strengths. This is a balancing act.\n  - Strength too low=poor transition between clips (blur, ghosting).  \n  - Strength too high=VACE clip is too bright.\n- The lightx2v loras can also amplify VACE's tendency to cause color or brightness shifts in generated frames.\n- For best results, don't use the lora. Run with regular Wan settings (20 steps, CFG=3.5, shift=8, or thereabouts. YMMV.)\n\n"
      ],
      "color": "#146e47",
      "bgcolor": "#005a33"
    },
    {
      "id": 15,
      "type": "PrimitiveString",
      "pos": [
        -6500,
        4120
      ],
      "size": [
        320,
        58
      ],
      "flags": {},
      "order": 37,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            1
          ]
        }
      ],
      "title": "Input Path",
      "properties": {
        "Node name for S&R": "InputPath",
        "cnr_id": "comfy-core",
        "ver": "0.3.59"
      },
      "widgets_values": [
        "F:\\comfyui-workdirs\\output\\spaceship\\raw"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 13,
      "type": "PrimitiveString",
      "pos": [
        -6500,
        4220
      ],
      "size": [
        320,
        58
      ],
      "flags": {},
      "order": 38,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            2
          ]
        }
      ],
      "title": "Project Name",
      "properties": {
        "Node name for S&R": "ProjectName",
        "cnr_id": "comfy-core",
        "ver": "0.3.59"
      },
      "widgets_values": [
        "spaceship"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 716,
      "type": "GetNode",
      "pos": [
        -4040,
        3930
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 39,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            1139
          ]
        }
      ],
      "title": "Get_debug",
      "properties": {},
      "widgets_values": [
        "debug"
      ]
    },
    {
      "id": 719,
      "type": "SetNode",
      "pos": [
        -2860,
        4860
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 121,
      "mode": 0,
      "inputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "link": 1094
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_clip2_filename",
      "properties": {
        "previousName": "clip2_filename"
      },
      "widgets_values": [
        "clip2_filename"
      ]
    },
    {
      "id": 583,
      "type": "GetNode",
      "pos": [
        -4250,
        6080
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 40,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            864,
            865
          ]
        }
      ],
      "title": "Get_clip2_filename",
      "properties": {},
      "widgets_values": [
        "clip2_filename"
      ]
    },
    {
      "id": 582,
      "type": "StringReplace",
      "pos": [
        -4060,
        6040
      ],
      "size": [
        210,
        196
      ],
      "flags": {
        "collapsed": true
      },
      "order": 83,
      "mode": 0,
      "inputs": [
        {
          "name": "string",
          "type": "STRING",
          "widget": {
            "name": "string"
          },
          "link": 864
        },
        {
          "name": "find",
          "type": "STRING",
          "widget": {
            "name": "find"
          },
          "link": 865
        },
        {
          "name": "replace",
          "type": "STRING",
          "widget": {
            "name": "replace"
          },
          "link": 866
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            867
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "StringReplace",
        "cnr_id": "comfy-core",
        "ver": "0.4.0"
      },
      "widgets_values": [
        "",
        "",
        ""
      ]
    },
    {
      "id": 572,
      "type": "Basic data handling: PathOutputDir",
      "pos": [
        -4250,
        6040
      ],
      "size": [
        140,
        26
      ],
      "flags": {
        "collapsed": true
      },
      "order": 41,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "output_path",
          "type": "STRING",
          "links": [
            866
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "Basic data handling: PathOutputDir",
        "cnr_id": "basic_data_handling",
        "ver": "1.0.0"
      },
      "widgets_values": [],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 498,
      "type": "StringConcatenate",
      "pos": [
        -4110,
        5960
      ],
      "size": [
        210,
        166
      ],
      "flags": {
        "collapsed": true
      },
      "order": 97,
      "mode": 0,
      "inputs": [
        {
          "name": "string_a",
          "type": "STRING",
          "widget": {
            "name": "string_a"
          },
          "link": 867
        },
        {
          "name": "string_b",
          "type": "STRING",
          "widget": {
            "name": "string_b"
          },
          "link": 718
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            860
          ]
        }
      ],
      "title": "output / work_dir",
      "properties": {
        "Node name for S&R": "StringConcatenate",
        "cnr_id": "comfy-core",
        "ver": "0.4.0"
      },
      "widgets_values": [
        "output",
        "",
        "/"
      ]
    },
    {
      "id": 578,
      "type": "GetNode",
      "pos": [
        -4120,
        5880
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 42,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            1156
          ]
        }
      ],
      "title": "Get_is_last",
      "properties": {},
      "widgets_values": [
        "is_last"
      ]
    },
    {
      "id": 720,
      "type": "MarkdownNote",
      "pos": [
        -4180,
        6130
      ],
      "size": [
        260,
        110
      ],
      "flags": {},
      "order": 43,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Final Assembly Dependencies",
      "properties": {},
      "widgets_values": [
        "This mess ensures the final join operation doesn't run until `is_last=True` and `clip2_filename` has a value. Writing out clip2 is the last thing we do in an iteration so it's a reliable indicator that the iteration is complete."
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 503,
      "type": "GetNode",
      "pos": [
        -3490,
        6000
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 44,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            693,
            694
          ]
        }
      ],
      "title": "Get_project_name",
      "properties": {},
      "widgets_values": [
        "project_name"
      ]
    },
    {
      "id": 718,
      "type": "VHS_SelectFilename",
      "pos": [
        -3100,
        4860
      ],
      "size": [
        224.3333282470703,
        58
      ],
      "flags": {
        "collapsed": true
      },
      "order": 115,
      "mode": 0,
      "inputs": [
        {
          "name": "filenames",
          "type": "VHS_FILENAMES",
          "link": 1093
        }
      ],
      "outputs": [
        {
          "name": "Filename",
          "type": "STRING",
          "links": [
            1094
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_SelectFilename",
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "1.7.9"
      },
      "widgets_values": {
        "index": -1
      }
    },
    {
      "id": 502,
      "type": "StringConcatenate",
      "pos": [
        -3280,
        6000
      ],
      "size": [
        210,
        166
      ],
      "flags": {
        "collapsed": true
      },
      "order": 84,
      "mode": 0,
      "inputs": [
        {
          "name": "string_a",
          "type": "STRING",
          "widget": {
            "name": "string_a"
          },
          "link": 693
        },
        {
          "name": "string_b",
          "type": "STRING",
          "widget": {
            "name": "string_b"
          },
          "link": 694
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            695
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "StringConcatenate",
        "cnr_id": "comfy-core",
        "ver": "0.4.0"
      },
      "widgets_values": [
        "",
        "",
        "/"
      ]
    },
    {
      "id": 500,
      "type": "GetNode",
      "pos": [
        -3280,
        5950
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 45,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "FLOAT",
          "type": "FLOAT",
          "links": [
            691
          ]
        }
      ],
      "title": "Get_fps",
      "properties": {},
      "widgets_values": [
        "fps"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 497,
      "type": "GetNode",
      "pos": [
        -4270,
        5960
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 46,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            718
          ]
        }
      ],
      "title": "Get_work_dir",
      "properties": {},
      "widgets_values": [
        "work_dir"
      ]
    },
    {
      "id": 723,
      "type": "SetNode",
      "pos": [
        -3420,
        3660
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 107,
      "mode": 0,
      "inputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "link": 1140
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_work_dir",
      "properties": {
        "previousName": "work_dir"
      },
      "widgets_values": [
        "work_dir"
      ]
    },
    {
      "id": 568,
      "type": "MarkdownNote",
      "pos": [
        -5000,
        4120
      ],
      "size": [
        450,
        180
      ],
      "flags": {},
      "order": 47,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Cross Fade",
      "properties": {},
      "widgets_values": [
        "# Cross Fade\n### The context frames at the start and end of the VACE generation are cross-faded over the original frames.\n- This helps to mute the color/brightness shift that VACE can introduce.\n- Since context frames in the original videos and the VACE generation are identical except for the color/brightness shift we are addressing, there is no danger of the cross fade introducing ghosting or blur.\n- To disable cross fade, open the **Cross Fade Contexts** subgraph and set *start_level* and *end_level* both to 1.00 on the two Cross Fade nodes."
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 715,
      "type": "SetNode",
      "pos": [
        -5420,
        4250
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 90,
      "mode": 0,
      "inputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "link": 1090
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_debug",
      "properties": {
        "previousName": "debug"
      },
      "widgets_values": [
        "debug"
      ]
    },
    {
      "id": 585,
      "type": "VRAM_Debug",
      "pos": [
        -3820,
        5850
      ],
      "size": [
        310,
        190
      ],
      "flags": {},
      "order": 120,
      "mode": 0,
      "inputs": [
        {
          "name": "any_input",
          "shape": 7,
          "type": "*",
          "link": 870
        },
        {
          "name": "image_pass",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "model_pass",
          "shape": 7,
          "type": "MODEL",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "any_output",
          "type": "*",
          "links": [
            928
          ]
        },
        {
          "name": "image_pass",
          "type": "IMAGE",
          "links": null
        },
        {
          "name": "model_pass",
          "type": "MODEL",
          "links": null
        },
        {
          "label": "14,367,956,030   freemem_before",
          "name": "freemem_before",
          "type": "INT",
          "links": null
        },
        {
          "label": "32,268,615,680      freemem_after",
          "name": "freemem_after",
          "type": "INT",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "VRAM_Debug",
        "cnr_id": "comfyui-kjnodes",
        "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
      },
      "widgets_values": [
        true,
        true,
        true
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 725,
      "type": "MarkdownNote",
      "pos": [
        -3770,
        6090
      ],
      "size": [
        230,
        150
      ],
      "flags": {},
      "order": 48,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "RAM management",
      "properties": {},
      "widgets_values": [
        "Depending on how many clips you are joining, final video assembly can be very RAM (not VRAM) intensive.  \n\nClearing ComfyUI cahce and unloading models can free up system RAM as well as VRAM."
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 726,
      "type": "GetNode",
      "pos": [
        -3480,
        5960
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 49,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            1097
          ]
        }
      ],
      "title": "Get_debug",
      "properties": {},
      "widgets_values": [
        "debug"
      ]
    },
    {
      "id": 366,
      "type": "VHS_VideoCombine",
      "pos": [
        -3370,
        4870
      ],
      "size": [
        220,
        454
      ],
      "flags": {},
      "order": 99,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1054
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_rate",
          "type": "FLOAT",
          "widget": {
            "name": "frame_rate"
          },
          "link": 1064
        },
        {
          "name": "filename_prefix",
          "type": "STRING",
          "widget": {
            "name": "filename_prefix"
          },
          "link": 905
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": [
            1093
          ]
        }
      ],
      "title": "Clip2 Lossless Save",
      "properties": {
        "Node name for S&R": "VHS_VideoCombine",
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "537f3a02269e14ab4b0350d4189a52034e9a3b12"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "",
        "format": "video/ffv1-mkv",
        "level": "3",
        "coder": "1",
        "context": "1",
        "gop_size": 1,
        "slices": "16",
        "slicecrc": "1",
        "pix_fmt": "yuv444p",
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": true,
          "paused": false,
          "params": {
            "filename": "index004_clip2_00001.mkv",
            "subfolder": "spaceship\\vace-work",
            "type": "output",
            "format": "video/ffv1-mkv",
            "frame_rate": 16,
            "workflow": "index004_clip2_00001.png",
            "fullpath": "f:\\comfyui-workdirs\\output\\spaceship\\vace-work\\index004_clip2_00001.mkv"
          }
        }
      },
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 669,
      "type": "GetNode",
      "pos": [
        -4220,
        5010
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 50,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            1006,
            1065,
            1067
          ]
        }
      ],
      "title": "Get_workfile_prefix",
      "properties": {},
      "widgets_values": [
        "workfile_prefix"
      ]
    },
    {
      "id": 370,
      "type": "GetNode",
      "pos": [
        -4220,
        4960
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 51,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "FLOAT",
          "type": "FLOAT",
          "links": [
            1055,
            1056,
            1064
          ]
        }
      ],
      "title": "Get_fps",
      "properties": {},
      "widgets_values": [
        "fps"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 687,
      "type": "MarkdownNote",
      "pos": [
        -3680,
        5410
      ],
      "size": [
        470,
        270
      ],
      "flags": {},
      "order": 52,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Clip Files",
      "properties": {},
      "widgets_values": [
        "- **clip1** - Frames from the current video that come *before* the transition region\n- **clip2** - VACE-generated transition frames between the current video and the next video  \n- **clip3** - Frames from the final video that come *after* the last transition region\n\n**clip3 only exists for the final iteration**\n\nEach video appears in two iterations - once as video_2 (the \"next\" video) and once as video_1 (the \"current\" video). The frames after each transition get saved when that video becomes video_1 in the next iteration. \n\nThe final video is the exception: it only appears as video_2 in the last iteration, so there's no \"next iteration\" to save its ending frames. That's why we save clip3 during the last iteration - to capture the ending of the final video.\n\n**Example with 3 videos:**\n- Iteration 0: video1‚Üívideo2 ‚Üí saves clip1 (video1 start) + clip2 (transition)\n- Iteration 1: video2‚Üívideo3 ‚Üí saves clip1 (video2 middle) + clip2 (transition) + clip3 (video3 end)"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 721,
      "type": "MarkdownNote",
      "pos": [
        -2870,
        5850
      ],
      "size": [
        350,
        130
      ],
      "flags": {},
      "order": 53,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Rerunning the Join step",
      "properties": {},
      "widgets_values": [
        "# If the Join step fails\nUse *Load Videos From Folder (Simple)* and *Video Combine* nodes to manually combine clips from the `project_name/vace-work` directory if you need to rerun this step.\n"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 595,
      "type": "PrimitiveBoolean",
      "pos": [
        -5000,
        4020
      ],
      "size": [
        270,
        60
      ],
      "flags": {},
      "order": 54,
      "mode": 0,
      "inputs": [
        {
          "label": "enable_cross_fade",
          "name": "value",
          "type": "BOOLEAN",
          "widget": {
            "name": "value"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            876
          ]
        }
      ],
      "title": "Post-Processing: Cross Fade",
      "properties": {
        "Node name for S&R": "PrimitiveBoolean",
        "cnr_id": "comfy-core",
        "ver": "0.4.0"
      },
      "widgets_values": [
        true
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 499,
      "type": "VHS_VideoCombine",
      "pos": [
        -3110,
        5790
      ],
      "size": [
        220.75,
        334
      ],
      "flags": {},
      "order": 127,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 929
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_rate",
          "type": "FLOAT",
          "widget": {
            "name": "frame_rate"
          },
          "link": 691
        },
        {
          "name": "filename_prefix",
          "type": "STRING",
          "widget": {
            "name": "filename_prefix"
          },
          "link": 695
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": []
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_VideoCombine",
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "537f3a02269e14ab4b0350d4189a52034e9a3b12"
      },
      "widgets_values": {
        "frame_rate": 8,
        "loop_count": 0,
        "filename_prefix": "AnimateDiff",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "spaceship_00001.mp4",
            "subfolder": "spaceship",
            "type": "output",
            "format": "video/h264-mp4",
            "frame_rate": 16,
            "workflow": "spaceship_00001.png",
            "fullpath": "f:\\comfyui-workdirs\\output\\spaceship\\spaceship_00001.mp4"
          }
        }
      },
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 411,
      "type": "SetNode",
      "pos": [
        -3530,
        4090
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 103,
      "mode": 0,
      "inputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "link": 1025
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_control_mask",
      "properties": {
        "previousName": "control_mask"
      },
      "widgets_values": [
        "control_mask"
      ],
      "color": "#1c5715",
      "bgcolor": "#1f401b"
    },
    {
      "id": 717,
      "type": "GetNode",
      "pos": [
        -4230,
        4350
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 55,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            1092
          ]
        }
      ],
      "title": "Get_debug",
      "properties": {},
      "widgets_values": [
        "debug"
      ]
    },
    {
      "id": 705,
      "type": "UNETLoader",
      "pos": [
        -6490,
        4400
      ],
      "size": [
        420,
        90
      ],
      "flags": {},
      "order": 56,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            1072
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "UNETLoader",
        "cnr_id": "comfy-core",
        "ver": "0.12.2"
      },
      "widgets_values": [
        "WAN 2.2\\Fun\\wan2.2_fun_vace_high_noise_14B_fp8_scaled.safetensors",
        "default"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 706,
      "type": "UNETLoader",
      "pos": [
        -6490,
        4530
      ],
      "size": [
        420,
        90
      ],
      "flags": {},
      "order": 57,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            1073
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "UNETLoader",
        "cnr_id": "comfy-core",
        "ver": "0.12.2"
      },
      "widgets_values": [
        "WAN 2.2\\Fun\\wan2.2_fun_vace_low_noise_14B_fp8_scaled.safetensors",
        "default"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 707,
      "type": "CLIPLoader",
      "pos": [
        -6490,
        4660
      ],
      "size": [
        420,
        110
      ],
      "flags": {},
      "order": 58,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            1074
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPLoader",
        "cnr_id": "comfy-core",
        "ver": "0.12.2"
      },
      "widgets_values": [
        "umt5_xxl_fp8_e4m3fn_scaled.safetensors",
        "wan",
        "default"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 713,
      "type": "PrimitiveBoolean",
      "pos": [
        -5690,
        4220
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 59,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            1090
          ]
        }
      ],
      "title": "Enable Debug",
      "properties": {
        "Node name for S&R": "PrimitiveBoolean",
        "cnr_id": "comfy-core",
        "ver": "0.12.2"
      },
      "widgets_values": [
        true
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 567,
      "type": "MarkdownNote",
      "pos": [
        -6940,
        3500
      ],
      "size": [
        390,
        440
      ],
      "flags": {},
      "order": 60,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Workflow Parameters",
      "properties": {},
      "widgets_values": [
        "# Parameters\n\nParameter |Description \n-|-\nInput Path | The location of your input files.\nProject Name | Output files will be placed in a directory with this name in your ComfyUI output directory. `ComfyUI/output/MyProject`\nContext Frames | The number of frames on either side of the transition that VACE will use as references for frame interpolation. 8 is a good value to start with.\nReplace Frames | The number of frames to regenerate on each side of the stitch. e.g. If set to 8, then VACE will generate 16 frames; 8 frames at the end of the first video and 8 frames at the start of the second video. This is the number of frames that will be *overwritten* by newly generated frames. Start small, 4 or 8 frames and adjust upward until you like the result.\nNew Frames | The number of additional frames to generate in addition to `Replace Frames`. Effectively extending the videos from the middle. If you have a reason to set `Replace Frames` to zero, then you'll want to add some frames here.\nPrompts | Prompts are optional here. The model is primarily guided by the motion cues in the context frames.\nDebug | Setting `Debug=True` will enable console logging of various parameters as the workflow run. If you want a little more progress feedback than the number of queued jobs remaining, this is a good way to get it.\n"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 566,
      "type": "MarkdownNote",
      "pos": [
        -7040,
        3990
      ],
      "size": [
        510,
        970
      ],
      "flags": {},
      "order": 61,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "How To Use This Workflow",
      "properties": {},
      "widgets_values": [
        "\n\n# How to Use This Workflow\n## The purpose of this workflow is to generate transition frames between two or more input videos.\n### This smooths out sudden motion shifts between clips and replaces noisy frames that sometimes appear at clip endings.\n\n---\n## IMPORTANT: Before running this workflow, you must configure it for your system. What works for my system probably doesn't work for yours. Please read the green notes for guidance.\n\nFor initial setup and run, you should only need to interact with the two nearby groups, ***Configuration*** and ***Model Load and Inference***.\n\n---\n\n### 1. Select models appropriate for your system\nSelect your VACE models. Choose models that match what you usually run in your normal Wan workflow. If you usually run FP8 for video generation, choose FP8 VACE models. If you usually use Q4 GGUF, use Q4 GGUF VACE models.\n\n### 2. Configure the KSamplers and Optimizations\nIn the Sampler subgraph, toggle common optimizations to suit your environment. As with the model choice, try to match the sampler settings and optimizations that you normally use for Wan generation. \n\n### 3. Clean up from previous runs\n- **Set the index parameter to 0.** `index` counts your input files, starting from 0. Each time you run the workflow, `index` is incremented, allowing the workflow to load the next set of inputs. If you forget to reset `index` to 0, the generations won't begin with the first video in your input directory.  \nIf the value of `index` is greater than the number of videos in your input directory, you'll see an error like *\"sequence item 1: expected str instance, NoneType found.\"* Learn to recognize this as a reminder to reset `index` to 0.\n- **Clear ComfyUI's run cache.** It's important to clear the execution cache between runs if you have run the workflow fully or partially already. Failure to do this will cause ComfyUI to skip steps that it has cached. Go to *C -> Edit -> Unload Models and Execution Cache*. You may also have a button next to **Manager** on your top button bar that does this.\n- **Delete or rename existing `vace-work` directory**. If you're re-running, don't leave previous work files in your project directory or they'll be included in your final video.\n\n### 4. Prepare inputs\nYour input videos should be placed in an empty directory and named such that they'll sort in the order they're meant to be viewed. e.g. `video01.mp4`, `video02.mp4`, etc. *Use zero-padding in your file names to avoid issues from lexical sorting.* If your files are named `video1.mp4`, `video9.mp4`, `video10.mp4`, they'll get sorted to `video1.mp4`, `video10.mp4`, `video9.mp4`, which is probably not what you want. Naming them `video01.mp4`, `video09.mp4`, `video10.mp4` will force correct sort order.\n\n### 5. Set the workflow parameters\nSee above for details on parameters.\n\n### 6. Run the workflow once for every pair of videos to be joined\nSet the batch count to one less than your total number of input videos, and click Run.\n\n- Work files from the run will be created in `ComfyUI/output/[project-directory]/vace-work`. You may safely delete the work directory after a successful run.\n- After frame generation completes, the final output video will be stitched together and placed in your specified project directory, `ComfyUI/output/[project-directory]`.\n\n"
      ],
      "color": "#146e47",
      "bgcolor": "#005a33"
    },
    {
      "id": 14,
      "type": "mxSlider",
      "pos": [
        -6500,
        3910
      ],
      "size": [
        320,
        30
      ],
      "flags": {},
      "order": 62,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "INT",
          "links": [
            4
          ]
        }
      ],
      "title": "Replace Frames",
      "properties": {
        "Node name for S&R": "mxSlider",
        "value": 8,
        "min": 0,
        "max": 40,
        "step": 4,
        "decimals": 0,
        "snap": true,
        "cnr_id": "comfyui-mxtoolkit",
        "ver": "0.9.92"
      },
      "widgets_values": [
        8,
        8,
        0
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 704,
      "type": "PrimitiveInt",
      "pos": [
        -5680,
        3560
      ],
      "size": [
        210,
        82
      ],
      "flags": {},
      "order": 63,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            1071
          ]
        }
      ],
      "title": "Seed",
      "properties": {
        "Node name for S&R": "PrimitiveInt",
        "cnr_id": "comfy-core",
        "ver": "0.12.2"
      },
      "widgets_values": [
        623845695270953,
        "randomize"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 569,
      "type": "MarkdownNote",
      "pos": [
        -5680,
        3060
      ],
      "size": [
        480,
        390
      ],
      "flags": {
        "collapsed": false
      },
      "order": 64,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Model links",
      "properties": {},
      "widgets_values": [
        "# VACE Model download links\n\nYou need one of the VACE variants below to run this workflow. Choose the model format and quantization that most closely matches what you run for your regular Wan workflow.\n\n**Wan 2.2 Fun VACE**\n  - [bf16 and fp8](https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/tree/main/split_files/diffusion_models)\n  - [GGUF](https://huggingface.co/QuantStack/Wan2.2-VACE-Fun-A14B-GGUF/tree/main)\n\n**Wan 2.1 VACE**\n\n  - [fp16](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/blob/main/split_files/diffusion_models/wan2.1_vace_14B_fp16.safetensors)\n\n  - [GGUF](https://huggingface.co/QuantStack/Wan2.1_14B_VACE-GGUF/tree/main)\n\n**Kijai‚Äôs extracted Fun Vace 2.2 modules, for loading along with standard T2V models. [Native use examples here.](https://huggingface.co/Kijai/WanVideo_comfy/discussions/81)**\n\n  - [bf16](https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Fun/VACE)\n  - [GGUF](https://huggingface.co/Kijai/WanVideo_comfy_GGUF/tree/main/VACE)\n\n\n\nModel Storage Location\n\n```\nüìÇ ComfyUI/\n‚îú‚îÄ‚îÄ üìÇ models/\n‚îÇ   ‚îî‚îÄ‚îÄ üìÇ diffusion_models/\n‚îÇ   ‚îÇ      ‚îú‚îÄ‚îÄ wan2.2_fun_vace_high_noise_14B_fp8_scaled.safetensors\n‚îÇ   ‚îÇ      ‚îî‚îÄ‚îÄ wan2.2_fun_vace_low_noise_14B_fp8_scaled.safetensors\n```\n"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 593,
      "type": "MarkdownNote",
      "pos": [
        -6190,
        3060
      ],
      "size": [
        490,
        390
      ],
      "flags": {},
      "order": 65,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Changelog",
      "properties": {},
      "widgets_values": [
        "[Github](https://github.com/stuttlepress/ComfyUI-Wan-VACE-Video-Joiner) | [CivitAI](https://civitai.com/models/2024299) \n\n- **v2.3** - This release prioritizes workflow reliability and maintainability. Core functionality remains unchanged. These changes reduce surface area for failures and improve debuggability. Stability and deterministic operation take priority over convenience features.\n\n  - **Looping workflow discontinued** ‚Äì While still functional, the loop-based approach obscured workflow status and complicated targeted reruns for specific transitions. The batch workflow provides better visibility and control.\n  - **Reverted to lossless fv1 intermediate files** ‚Äì The 16-bit PNG experiment provided no practical benefit and made addressing individual joins more cumbersome. Returning to the proven method.\n  - **New custom nodes for cleaner workflows** ‚Äì *WAN VACE Prep Batch* and *VACE Batch Context* encapsulate operations that are awkward to express in visual nodes but straightforward in Python. *Load Videos From Folder (simple)* replaces the KJNodes equivalent to eliminate problematic VideoHelperSuite dependencies that fail in some environments.\n  - **Enhanced console logging** ‚Äì Additional diagnostic output when `Debug=True` to aid troubleshooting.\n  - **Fewer custom node dependencies** \n\n- **v2.2** - *Complexity Reduction Release*\n  - Removed fancy model loader which was causing headaches for safetensors users without any gguf models installed, and vice-versa.\n  - Removed the MOE KSampler and TripleKSampler subgraphs. You can still use these samplers with this workflow, but it's up to you to bring them and set them up.\n  - Custom node dependencies reduced.\n  - Un-subgraphed some functions. Sadly, this powerful and useful feature is still too unstable to distribute to users on varying versions of ComfyUI.\n- **v2.1**\n  - Add Prune Outputs to Video Combine nodes, preventing extra frames from being added to the output  \n- **v2.0**\n  - Workflow redesign. Core functionality is the same, but hopefully usability is improved\n  - (Experimental) Added cross fade at VACE boundaries to mitigate brightness/color shift\n  - (Experimental) Added color match for VACE frames to mitigate brightness/color shift\n  - Save intermediate work as 16 bit png instead of ffv1\n  - Integrated video join into the main workflow. No more need to run the join part separately.\n  - Excessive documentation\n  - (Experimental) New looping workflow variant that doesn't require manual queueing and index manipulation. \n  - Inputs and outputs are logged to the console for better progress tracking\n\n- **v1.3**\n  - removed lingering custom primitive node\n\n- **v1.2**\n  - Sort the input directory list.  \n\n- **v1.1**\n  - Preserve input framerate in workflow VACE outputs. Previously, all output was forced to 16fps. Note, you must manually set the framerate in the Join & Save output.  \n  - Changed default model/sampler to Wan 2.2 Fun VACE fp8/KSampler. GGUF, MoE, 2.1 are still available in the bypassed subgraphs.\n"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 494,
      "type": "5b803fdb-e065-4df0-9485-4b7bd5a4879e",
      "pos": [
        -3120,
        4570
      ],
      "size": [
        210,
        70
      ],
      "flags": {},
      "order": 113,
      "mode": 0,
      "inputs": [
        {
          "label": "control_video",
          "name": "images",
          "type": "IMAGE",
          "link": 1113
        },
        {
          "label": "context_frames",
          "name": "num_frames",
          "type": "INT",
          "link": 885
        },
        {
          "label": "vace_output",
          "name": "images_1",
          "type": "IMAGE",
          "link": 880
        }
      ],
      "outputs": [
        {
          "label": "vace_final",
          "name": "images",
          "type": "IMAGE",
          "links": [
            882
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [],
        "cnr_id": "comfy-core",
        "ver": "0.4.0"
      },
      "widgets_values": [],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 746,
      "type": "WanVACEBatchContext",
      "pos": [
        -3780,
        3690
      ],
      "size": [
        270,
        230
      ],
      "flags": {},
      "order": 95,
      "mode": 0,
      "inputs": [
        {
          "name": "input_list",
          "type": "STRING",
          "link": 1135
        },
        {
          "name": "input_dir",
          "type": "STRING",
          "widget": {
            "name": "input_dir"
          },
          "link": 1136
        },
        {
          "name": "project_name",
          "type": "STRING",
          "widget": {
            "name": "project_name"
          },
          "link": 1137
        },
        {
          "name": "index",
          "type": "INT",
          "widget": {
            "name": "index"
          },
          "link": 1138
        },
        {
          "name": "debug",
          "type": "BOOLEAN",
          "widget": {
            "name": "debug"
          },
          "link": 1139
        }
      ],
      "outputs": [
        {
          "name": "work_dir",
          "type": "STRING",
          "links": [
            1140
          ]
        },
        {
          "name": "workfile_prefix",
          "type": "STRING",
          "links": [
            1141
          ]
        },
        {
          "name": "video_1_filename",
          "type": "STRING",
          "links": [
            1142
          ]
        },
        {
          "name": "video_2_filename",
          "type": "STRING",
          "links": [
            1143
          ]
        },
        {
          "name": "is_first",
          "type": "BOOLEAN",
          "links": [
            1144
          ]
        },
        {
          "name": "is_last",
          "type": "BOOLEAN",
          "links": [
            1145
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "WanVACEBatchContext"
      },
      "widgets_values": [
        "",
        ".",
        0,
        false
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 652,
      "type": "GetNode",
      "pos": [
        -4040,
        3890
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 66,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            1138
          ]
        }
      ],
      "title": "Get_index",
      "properties": {},
      "widgets_values": [
        "index"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 747,
      "type": "SetNode",
      "pos": [
        -3470,
        3890
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 111,
      "mode": 0,
      "inputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "link": 1144
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_is_first",
      "properties": {
        "previousName": "is_first"
      },
      "widgets_values": [
        "is_first"
      ]
    },
    {
      "id": 661,
      "type": "VHS_LoadVideoFFmpegPath",
      "pos": [
        -3120,
        3590
      ],
      "size": [
        220,
        262
      ],
      "flags": {
        "collapsed": false
      },
      "order": 109,
      "mode": 0,
      "inputs": [
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "video",
          "type": "STRING",
          "widget": {
            "name": "video"
          },
          "link": 1142
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1116
          ]
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": []
        },
        {
          "name": "audio",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "video_info",
          "type": "VHS_VIDEOINFO",
          "links": [
            986
          ]
        }
      ],
      "title": "Load First Video",
      "properties": {
        "Node name for S&R": "VHS_LoadVideoFFmpegPath",
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0edce8ef7ce173ac97a3ed3d6f4636029d1a4530"
      },
      "widgets_values": {
        "video": "",
        "force_rate": 0,
        "custom_width": 0,
        "custom_height": 0,
        "frame_load_cap": 0,
        "start_time": 0,
        "format": "Wan",
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "",
            "type": "path",
            "format": "video/",
            "force_rate": 0,
            "custom_width": 0,
            "custom_height": 0,
            "frame_load_cap": 0,
            "start_time": 0
          }
        }
      },
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 662,
      "type": "VHS_LoadVideoFFmpegPath",
      "pos": [
        -3110,
        3900
      ],
      "size": [
        220,
        262
      ],
      "flags": {
        "collapsed": false
      },
      "order": 110,
      "mode": 0,
      "inputs": [
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "video",
          "type": "STRING",
          "widget": {
            "name": "video"
          },
          "link": 1143
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1115
          ]
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": []
        },
        {
          "name": "audio",
          "type": "AUDIO",
          "links": []
        },
        {
          "name": "video_info",
          "type": "VHS_VIDEOINFO",
          "links": []
        }
      ],
      "title": "Load Second Video",
      "properties": {
        "Node name for S&R": "VHS_LoadVideoFFmpegPath",
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0edce8ef7ce173ac97a3ed3d6f4636029d1a4530"
      },
      "widgets_values": {
        "video": "",
        "force_rate": 0,
        "custom_width": 0,
        "custom_height": 0,
        "frame_load_cap": 0,
        "start_time": 0,
        "format": "Wan",
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "",
            "type": "path",
            "format": "video/",
            "force_rate": 0,
            "custom_width": 0,
            "custom_height": 0,
            "frame_load_cap": 0,
            "start_time": 0
          }
        }
      },
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 663,
      "type": "MarkdownNote",
      "pos": [
        -2760,
        3770
      ],
      "size": [
        230,
        90
      ],
      "flags": {},
      "order": 67,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Video Parameters",
      "properties": {},
      "widgets_values": [
        "It is assumed that video1 and video2 have the same framerate, width and height.\n\nVideo will be generated and output with the same parameters as video1."
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 689,
      "type": "SetNode",
      "pos": [
        -2830,
        3930
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 118,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 1115
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_video2",
      "properties": {
        "previousName": "video2"
      },
      "widgets_values": [
        "video2"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 748,
      "type": "SetNode",
      "pos": [
        -3470,
        3930
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 112,
      "mode": 0,
      "inputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "link": 1145
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_is_last",
      "properties": {
        "previousName": "is_last"
      },
      "widgets_values": [
        "is_last"
      ]
    },
    {
      "id": 686,
      "type": "GetNode",
      "pos": [
        -4230,
        4190
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 68,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "BOOLEAN",
          "type": "BOOLEAN",
          "links": [
            1147
          ]
        }
      ],
      "title": "Get_is_last",
      "properties": {},
      "widgets_values": [
        "is_last"
      ]
    },
    {
      "id": 738,
      "type": "MarkdownNote",
      "pos": [
        -3590,
        4270
      ],
      "size": [
        340,
        150
      ],
      "flags": {},
      "order": 69,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Frame Math",
      "properties": {},
      "widgets_values": [
        "\nThis workflow will generate \n```\n(Context Frames * 2) + (Replace Frames * 2) + New Frames + 1\n```\n total frames. (The +1 is to meet the Wan's preference for generating 4n+1 frames at a time. If we don't precisely hit that, the model will quietly round down our requested number of frames to the nearest 4n+1.)\nThe same rules apply here as with regular Wan generations, so 81 total frames is still the sweet spot. "
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 676,
      "type": "SetNode",
      "pos": [
        -3530,
        4130
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 104,
      "mode": 0,
      "inputs": [
        {
          "name": "INT",
          "type": "INT",
          "link": 1149
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_vace_frames",
      "properties": {
        "previousName": "vace_frames"
      },
      "widgets_values": [
        "vace_frames"
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 750,
      "type": "SetNode",
      "pos": [
        -3530,
        4170
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 105,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 1151
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_clip1",
      "properties": {
        "previousName": "clip1"
      },
      "widgets_values": [
        "clip1"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 751,
      "type": "SetNode",
      "pos": [
        -3530,
        4210
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 106,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 1152
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_clip3",
      "properties": {
        "previousName": "clip3"
      },
      "widgets_values": [
        "clip3"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 696,
      "type": "GetNode",
      "pos": [
        -3020,
        4960
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 70,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1153
          ]
        }
      ],
      "title": "Get_clip3",
      "properties": {},
      "widgets_values": [
        "clip3"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 667,
      "type": "VHS_VideoCombine",
      "pos": [
        -3810,
        4890
      ],
      "size": [
        220,
        454
      ],
      "flags": {
        "collapsed": false
      },
      "order": 98,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1154
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_rate",
          "type": "FLOAT",
          "widget": {
            "name": "frame_rate"
          },
          "link": 1055
        },
        {
          "name": "filename_prefix",
          "type": "STRING",
          "widget": {
            "name": "filename_prefix"
          },
          "link": 1007
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": []
        }
      ],
      "title": "Clip1 Lossless Save",
      "properties": {
        "Node name for S&R": "VHS_VideoCombine",
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "537f3a02269e14ab4b0350d4189a52034e9a3b12"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "",
        "format": "video/ffv1-mkv",
        "level": "3",
        "coder": "1",
        "context": "1",
        "gop_size": 1,
        "slices": "16",
        "slicecrc": "1",
        "pix_fmt": "yuv444p",
        "save_metadata": false,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": true,
          "paused": false,
          "params": {
            "filename": "index004_clip1_00001.mkv",
            "subfolder": "spaceship\\vace-work",
            "type": "output",
            "format": "video/ffv1-mkv",
            "frame_rate": 16,
            "workflow": "index004_clip1_00001.png",
            "fullpath": "f:\\comfyui-workdirs\\output\\spaceship\\vace-work\\index004_clip1_00001.mkv"
          }
        }
      },
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 695,
      "type": "GetNode",
      "pos": [
        -3960,
        4920
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 71,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1154
          ]
        }
      ],
      "title": "Get_clip1",
      "properties": {},
      "widgets_values": [
        "clip1"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 671,
      "type": "VHS_VideoCombine",
      "pos": [
        -2880,
        4930
      ],
      "size": [
        220,
        454
      ],
      "flags": {},
      "order": 100,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1153
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_rate",
          "type": "FLOAT",
          "widget": {
            "name": "frame_rate"
          },
          "link": 1056
        },
        {
          "name": "filename_prefix",
          "type": "STRING",
          "widget": {
            "name": "filename_prefix"
          },
          "link": 1009
        },
        {
          "name": "save_output",
          "type": "BOOLEAN",
          "widget": {
            "name": "save_output"
          },
          "link": 1155
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": []
        }
      ],
      "title": "Clip3 Lossless Save",
      "properties": {
        "Node name for S&R": "VHS_VideoCombine",
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "537f3a02269e14ab4b0350d4189a52034e9a3b12"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "",
        "format": "video/ffv1-mkv",
        "level": "3",
        "coder": "1",
        "context": "1",
        "gop_size": 1,
        "slices": "16",
        "slicecrc": "1",
        "pix_fmt": "yuv444p",
        "save_metadata": false,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": true,
          "paused": false,
          "params": {
            "filename": "index004_clip3_00001.mkv",
            "subfolder": "spaceship\\vace-work",
            "type": "output",
            "format": "video/ffv1-mkv",
            "frame_rate": 16,
            "workflow": "index004_clip3_00001.png",
            "fullpath": "f:\\comfyui-workdirs\\output\\spaceship\\vace-work\\index004_clip3_00001.mkv"
          }
        }
      },
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 577,
      "type": "Basic data handling: FlowSelect",
      "pos": [
        -3970,
        5880
      ],
      "size": [
        210,
        78
      ],
      "flags": {
        "collapsed": true
      },
      "order": 114,
      "mode": 0,
      "inputs": [
        {
          "name": "value",
          "type": "*",
          "link": 860
        },
        {
          "name": "select",
          "type": "BOOLEAN",
          "widget": {
            "name": "select"
          },
          "link": 1156
        }
      ],
      "outputs": [
        {
          "name": "true",
          "type": "*",
          "links": [
            870
          ]
        },
        {
          "name": "false",
          "type": "*",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "Basic data handling: FlowSelect",
        "cnr_id": "basic_data_handling",
        "ver": "1.0.0"
      },
      "widgets_values": [
        false
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 646,
      "type": "LoadVideosFromFolderSimple",
      "pos": [
        -3450,
        5810
      ],
      "size": [
        290,
        82
      ],
      "flags": {},
      "order": 126,
      "mode": 0,
      "inputs": [
        {
          "name": "folder_path",
          "type": "STRING",
          "widget": {
            "name": "folder_path"
          },
          "link": 928
        },
        {
          "name": "debug",
          "type": "BOOLEAN",
          "widget": {
            "name": "debug"
          },
          "link": 1097
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            929
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "LoadVideosFromFolderSimple",
        "cnr_id": "comfyui-wan-vace-prep",
        "ver": "ee7ecb7470f06bae23741585b285aea7f82fdce9"
      },
      "widgets_values": [
        "",
        false
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 674,
      "type": "WanVACEPrepBatch",
      "pos": [
        -3910,
        4050
      ],
      "size": [
        240,
        300
      ],
      "flags": {},
      "order": 93,
      "mode": 0,
      "inputs": [
        {
          "name": "video_1",
          "type": "IMAGE",
          "link": 1047
        },
        {
          "name": "video_2",
          "type": "IMAGE",
          "link": 1048
        },
        {
          "name": "is_first",
          "type": "BOOLEAN",
          "widget": {
            "name": "is_first"
          },
          "link": 1146
        },
        {
          "name": "is_last",
          "type": "BOOLEAN",
          "widget": {
            "name": "is_last"
          },
          "link": 1147
        },
        {
          "name": "context_frames",
          "type": "INT",
          "widget": {
            "name": "context_frames"
          },
          "link": 1021
        },
        {
          "name": "replace_frames",
          "type": "INT",
          "widget": {
            "name": "replace_frames"
          },
          "link": 1022
        },
        {
          "name": "new_frames",
          "type": "INT",
          "widget": {
            "name": "new_frames"
          },
          "link": 1148
        },
        {
          "name": "debug",
          "type": "BOOLEAN",
          "widget": {
            "name": "debug"
          },
          "link": 1092
        }
      ],
      "outputs": [
        {
          "name": "control_video",
          "type": "IMAGE",
          "links": [
            1117
          ]
        },
        {
          "name": "control_mask",
          "type": "MASK",
          "links": [
            1025
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": []
        },
        {
          "name": "height",
          "type": "INT",
          "links": []
        },
        {
          "name": "length",
          "type": "INT",
          "links": [
            1149
          ]
        },
        {
          "name": "start_images",
          "type": "IMAGE",
          "links": [
            1151
          ]
        },
        {
          "name": "end_images",
          "type": "IMAGE",
          "links": [
            1152
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "WanVACEPrepBatch",
        "cnr_id": "comfyui-wan-vace-prep",
        "ver": "ee7ecb7470f06bae23741585b285aea7f82fdce9"
      },
      "widgets_values": [
        false,
        false,
        8,
        8,
        0,
        true
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 573,
      "type": "PrimitiveInt",
      "pos": [
        -5680,
        3830
      ],
      "size": [
        240,
        100
      ],
      "flags": {},
      "order": 72,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            868
          ]
        }
      ],
      "title": "Index",
      "properties": {
        "Node name for S&R": "PrimitiveInt",
        "cnr_id": "comfy-core",
        "ver": "0.4.0"
      },
      "widgets_values": [
        0,
        "increment"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 560,
      "type": "9b4d3e88-b5cd-42bf-8e0e-e1c1abbba7df",
      "pos": [
        -6110,
        5630
      ],
      "size": [
        510,
        750
      ],
      "flags": {},
      "order": 73,
      "mode": 4,
      "inputs": [
        {
          "label": "model",
          "name": "model",
          "type": "MODEL",
          "link": null
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": null
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": null
        },
        {
          "label": "control_video",
          "name": "IMAGE",
          "type": "IMAGE",
          "link": null
        },
        {
          "label": "control_mask",
          "name": "MASK",
          "type": "MASK",
          "link": null
        },
        {
          "label": "positive_prompt",
          "name": "value",
          "type": "STRING",
          "widget": {
            "name": "value"
          },
          "link": null
        },
        {
          "label": "negative_prompt",
          "name": "value_1",
          "type": "STRING",
          "widget": {
            "name": "value_1"
          },
          "link": null
        },
        {
          "label": "width",
          "name": "value_2",
          "type": "INT",
          "widget": {
            "name": "value_2"
          },
          "link": null
        },
        {
          "label": "height",
          "name": "value_3",
          "type": "INT",
          "widget": {
            "name": "value_3"
          },
          "link": null
        },
        {
          "label": "length",
          "name": "value_4",
          "type": "INT",
          "widget": {
            "name": "value_4"
          },
          "link": null
        },
        {
          "label": "seed",
          "name": "value_7",
          "type": "INT",
          "widget": {
            "name": "value_7"
          },
          "link": null
        },
        {
          "label": "‚û°Ô∏èenable_torch_compile",
          "name": "value_8",
          "type": "BOOLEAN",
          "widget": {
            "name": "value_8"
          },
          "link": null
        },
        {
          "label": "‚û°Ô∏èsage_attention",
          "name": "value_9",
          "type": "BOOLEAN",
          "widget": {
            "name": "value_9"
          },
          "link": null
        },
        {
          "label": "‚û°Ô∏ènag",
          "name": "value_10",
          "type": "BOOLEAN",
          "widget": {
            "name": "value_10"
          },
          "link": null
        },
        {
          "label": "‚û°Ô∏èlightx2v",
          "name": "value_11",
          "type": "BOOLEAN",
          "widget": {
            "name": "value_11"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "image",
          "name": "IMAGE",
          "type": "IMAGE",
          "links": null
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "-1",
            "value_2"
          ],
          [
            "-1",
            "value_3"
          ],
          [
            "-1",
            "value_4"
          ],
          [
            "-1",
            "value_1"
          ],
          [
            "-1",
            "value"
          ],
          [
            "-1",
            "value_7"
          ],
          [
            "-1",
            "value_9"
          ],
          [
            "-1",
            "value_8"
          ],
          [
            "-1",
            "value_10"
          ],
          [
            "-1",
            "value_11"
          ],
          [
            "319",
            "lora_name"
          ],
          [
            "319",
            "strength_model"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.3.59"
      },
      "widgets_values": [
        0,
        0,
        0,
        "",
        "",
        0,
        true,
        false,
        true,
        true
      ],
      "color": "#323",
      "bgcolor": "#535"
    }
  ],
  "links": [
    [
      1,
      15,
      0,
      1,
      0,
      "*"
    ],
    [
      2,
      13,
      0,
      2,
      0,
      "*"
    ],
    [
      3,
      10,
      0,
      3,
      0,
      "*"
    ],
    [
      4,
      14,
      0,
      4,
      0,
      "*"
    ],
    [
      5,
      9,
      0,
      5,
      0,
      "*"
    ],
    [
      9,
      12,
      0,
      11,
      0,
      "*"
    ],
    [
      343,
      53,
      0,
      267,
      0,
      "STRING"
    ],
    [
      535,
      417,
      0,
      418,
      0,
      "*"
    ],
    [
      559,
      413,
      0,
      435,
      5,
      "MASK"
    ],
    [
      560,
      420,
      0,
      435,
      8,
      "INT"
    ],
    [
      561,
      423,
      0,
      435,
      9,
      "INT"
    ],
    [
      563,
      426,
      0,
      435,
      11,
      "INT"
    ],
    [
      564,
      419,
      0,
      435,
      7,
      "STRING"
    ],
    [
      565,
      416,
      0,
      435,
      6,
      "STRING"
    ],
    [
      630,
      412,
      0,
      435,
      4,
      "IMAGE"
    ],
    [
      691,
      500,
      0,
      499,
      4,
      "FLOAT"
    ],
    [
      693,
      503,
      0,
      502,
      0,
      "STRING"
    ],
    [
      694,
      503,
      0,
      502,
      1,
      "STRING"
    ],
    [
      695,
      502,
      0,
      499,
      5,
      "STRING"
    ],
    [
      718,
      497,
      0,
      498,
      1,
      "STRING"
    ],
    [
      860,
      498,
      0,
      577,
      0,
      "*"
    ],
    [
      864,
      583,
      0,
      582,
      0,
      "STRING"
    ],
    [
      865,
      583,
      0,
      582,
      1,
      "STRING"
    ],
    [
      866,
      572,
      0,
      582,
      2,
      "STRING"
    ],
    [
      867,
      582,
      0,
      498,
      0,
      "STRING"
    ],
    [
      868,
      573,
      0,
      574,
      0,
      "INT"
    ],
    [
      870,
      577,
      0,
      585,
      0,
      "*"
    ],
    [
      871,
      456,
      0,
      587,
      0,
      "IMAGE"
    ],
    [
      872,
      457,
      0,
      587,
      2,
      "IMAGE"
    ],
    [
      873,
      485,
      0,
      587,
      1,
      "INT"
    ],
    [
      875,
      594,
      0,
      596,
      0,
      "*"
    ],
    [
      876,
      595,
      0,
      597,
      0,
      "*"
    ],
    [
      877,
      599,
      0,
      598,
      2,
      "BOOLEAN"
    ],
    [
      878,
      587,
      0,
      598,
      0,
      "*"
    ],
    [
      879,
      457,
      0,
      598,
      1,
      "*"
    ],
    [
      880,
      598,
      0,
      494,
      2,
      "IMAGE"
    ],
    [
      881,
      601,
      0,
      600,
      2,
      "BOOLEAN"
    ],
    [
      882,
      494,
      0,
      600,
      0,
      "*"
    ],
    [
      884,
      598,
      0,
      600,
      1,
      "*"
    ],
    [
      885,
      602,
      0,
      494,
      1,
      "INT"
    ],
    [
      905,
      627,
      0,
      366,
      5,
      "STRING"
    ],
    [
      928,
      585,
      0,
      646,
      0,
      "STRING"
    ],
    [
      929,
      646,
      0,
      499,
      0,
      "IMAGE"
    ],
    [
      986,
      661,
      3,
      664,
      0,
      "VHS_VIDEOINFO"
    ],
    [
      992,
      664,
      3,
      421,
      0,
      "INT"
    ],
    [
      993,
      664,
      4,
      422,
      0,
      "INT"
    ],
    [
      994,
      664,
      0,
      665,
      0,
      "FLOAT"
    ],
    [
      1006,
      669,
      0,
      670,
      0,
      "STRING"
    ],
    [
      1007,
      670,
      0,
      667,
      5,
      "STRING"
    ],
    [
      1009,
      672,
      0,
      671,
      5,
      "STRING"
    ],
    [
      1021,
      323,
      0,
      674,
      4,
      "INT"
    ],
    [
      1022,
      322,
      0,
      674,
      5,
      "INT"
    ],
    [
      1025,
      674,
      1,
      411,
      0,
      "MASK"
    ],
    [
      1028,
      425,
      0,
      435,
      10,
      "INT"
    ],
    [
      1047,
      691,
      0,
      674,
      0,
      "IMAGE"
    ],
    [
      1048,
      692,
      0,
      674,
      1,
      "IMAGE"
    ],
    [
      1053,
      600,
      0,
      697,
      0,
      "*"
    ],
    [
      1054,
      698,
      0,
      366,
      0,
      "IMAGE"
    ],
    [
      1055,
      370,
      0,
      667,
      4,
      "FLOAT"
    ],
    [
      1056,
      370,
      0,
      671,
      4,
      "FLOAT"
    ],
    [
      1064,
      370,
      0,
      366,
      4,
      "FLOAT"
    ],
    [
      1065,
      669,
      0,
      627,
      0,
      "STRING"
    ],
    [
      1067,
      669,
      0,
      672,
      0,
      "STRING"
    ],
    [
      1071,
      704,
      0,
      428,
      0,
      "INT"
    ],
    [
      1072,
      705,
      0,
      435,
      0,
      "MODEL"
    ],
    [
      1073,
      706,
      0,
      435,
      1,
      "MODEL"
    ],
    [
      1074,
      707,
      0,
      435,
      2,
      "CLIP"
    ],
    [
      1075,
      708,
      0,
      435,
      3,
      "VAE"
    ],
    [
      1090,
      713,
      0,
      715,
      0,
      "BOOLEAN"
    ],
    [
      1092,
      717,
      0,
      674,
      7,
      "BOOLEAN"
    ],
    [
      1093,
      366,
      0,
      718,
      0,
      "VHS_FILENAMES"
    ],
    [
      1094,
      718,
      0,
      719,
      0,
      "STRING"
    ],
    [
      1097,
      726,
      0,
      646,
      1,
      "BOOLEAN"
    ],
    [
      1113,
      604,
      0,
      494,
      0,
      "IMAGE"
    ],
    [
      1114,
      435,
      0,
      442,
      0,
      "IMAGE"
    ],
    [
      1115,
      662,
      0,
      689,
      0,
      "IMAGE"
    ],
    [
      1116,
      661,
      0,
      690,
      0,
      "IMAGE"
    ],
    [
      1117,
      674,
      0,
      666,
      0,
      "IMAGE"
    ],
    [
      1135,
      267,
      0,
      746,
      0,
      "STRING"
    ],
    [
      1136,
      53,
      0,
      746,
      1,
      "STRING"
    ],
    [
      1137,
      651,
      0,
      746,
      2,
      "STRING"
    ],
    [
      1138,
      652,
      0,
      746,
      3,
      "INT"
    ],
    [
      1139,
      716,
      0,
      746,
      4,
      "BOOLEAN"
    ],
    [
      1140,
      746,
      0,
      723,
      0,
      "STRING"
    ],
    [
      1141,
      746,
      1,
      658,
      0,
      "STRING"
    ],
    [
      1142,
      746,
      2,
      661,
      2,
      "STRING"
    ],
    [
      1143,
      746,
      3,
      662,
      2,
      "STRING"
    ],
    [
      1144,
      746,
      4,
      747,
      0,
      "BOOLEAN"
    ],
    [
      1145,
      746,
      5,
      748,
      0,
      "BOOLEAN"
    ],
    [
      1146,
      685,
      0,
      674,
      2,
      "BOOLEAN"
    ],
    [
      1147,
      686,
      0,
      674,
      3,
      "BOOLEAN"
    ],
    [
      1148,
      430,
      0,
      674,
      6,
      "INT"
    ],
    [
      1149,
      674,
      4,
      676,
      0,
      "INT"
    ],
    [
      1151,
      674,
      5,
      750,
      0,
      "IMAGE"
    ],
    [
      1152,
      674,
      6,
      751,
      0,
      "IMAGE"
    ],
    [
      1153,
      696,
      0,
      671,
      0,
      "IMAGE"
    ],
    [
      1154,
      695,
      0,
      667,
      0,
      "IMAGE"
    ],
    [
      1155,
      683,
      0,
      671,
      6,
      "BOOLEAN"
    ],
    [
      1156,
      578,
      0,
      577,
      1,
      "BOOLEAN"
    ]
  ],
  "groups": [
    {
      "id": 5,
      "title": "Model Load and Inference",
      "bounding": [
        -6520,
        4320,
        1980,
        1230
      ],
      "color": "#b58b2a",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 6,
      "title": "Configuration",
      "bounding": [
        -6520,
        3460,
        1980,
        850
      ],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 8,
      "title": "Save Intermediate Files",
      "bounding": [
        -4280,
        4770,
        1770,
        930
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 9,
      "title": "Join Frames into Final Video",
      "bounding": [
        -4280,
        5710,
        1770,
        550
      ],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 10,
      "title": "Post-Processing: Color Match",
      "bounding": [
        -4280,
        4440,
        880,
        320
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 11,
      "title": "Post-Processing: Cross Fade",
      "bounding": [
        -3390,
        4440,
        880,
        320
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 12,
      "title": "Pre-Processing: Set Context",
      "bounding": [
        -4280,
        3430,
        1040,
        530
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 13,
      "title": "Pre-Processing: Build VACE Controls",
      "bounding": [
        -4280,
        3970,
        1040,
        460
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 14,
      "title": "Pre-Processing: Load Inputs",
      "bounding": [
        -3230,
        3430,
        720,
        1000
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    }
  ],
  "definitions": {
    "subgraphs": [
      {
        "id": "9f21363a-eb71-41d2-a35a-b3d150e1b355",
        "version": 1,
        "state": {
          "lastGroupId": 11,
          "lastNodeId": 762,
          "lastLinkId": 1116,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Get Input List",
        "inputNode": {
          "id": -10,
          "bounding": [
            1950,
            1500,
            120,
            60
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            2960,
            1750,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "ce679cd2-de21-465a-b367-a9fd800c2d90",
            "name": "path",
            "type": "STRING",
            "linkIds": [
              943
            ],
            "localized_name": "path",
            "pos": [
              2050,
              1520
            ]
          }
        ],
        "outputs": [
          {
            "id": "4f4c92cc-46a6-4dcc-9c49-cff022eb4517",
            "name": "result",
            "type": "*",
            "linkIds": [
              1113
            ],
            "label": "filtered_list",
            "pos": [
              2980,
              1770
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 697,
            "type": "PrimitiveString",
            "pos": [
              2170,
              1640
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 0,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  1015
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveString",
              "cnr_id": "comfy-core",
              "ver": "0.3.60"
            },
            "widgets_values": [
              ".DS_Store"
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 701,
            "type": "Basic data handling: DataListIndex",
            "pos": [
              2430,
              1800
            ],
            "size": [
              210,
              102
            ],
            "flags": {
              "collapsed": true
            },
            "order": 6,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "list",
                "name": "list",
                "type": "*",
                "link": 1093
              },
              {
                "localized_name": "value",
                "name": "value",
                "type": "*",
                "link": 1018
              }
            ],
            "outputs": [
              {
                "localized_name": "index",
                "name": "index",
                "type": "INT",
                "links": [
                  1094
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: DataListIndex",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              0,
              -1
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 699,
            "type": "Basic data handling: DataListIndex",
            "pos": [
              2440,
              1670
            ],
            "size": [
              210,
              102
            ],
            "flags": {
              "collapsed": true
            },
            "order": 4,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "list",
                "name": "list",
                "type": "*",
                "link": 1021
              },
              {
                "localized_name": "value",
                "name": "value",
                "type": "*",
                "link": 1015
              }
            ],
            "outputs": [
              {
                "localized_name": "index",
                "name": "index",
                "type": "INT",
                "links": [
                  1016,
                  1091
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: DataListIndex",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              0,
              -1
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 746,
            "type": "Basic data handling: GreaterThanOrEqual",
            "pos": [
              2560,
              1670
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 9,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value1",
                "name": "value1",
                "type": "FLOAT,INT",
                "widget": {
                  "name": "value1"
                },
                "link": 1091
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "BOOLEAN",
                "links": [
                  1092
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: GreaterThanOrEqual",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              0,
              0
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 747,
            "type": "Basic data handling: GreaterThanOrEqual",
            "pos": [
              2550,
              1800
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 10,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value1",
                "name": "value1",
                "type": "FLOAT,INT",
                "widget": {
                  "name": "value1"
                },
                "link": 1094
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "BOOLEAN",
                "links": [
                  1098
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: GreaterThanOrEqual",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              0,
              0
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 702,
            "type": "Basic data handling: DataListPop",
            "pos": [
              2550,
              1760
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": true
            },
            "order": 7,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "list",
                "name": "list",
                "type": "*",
                "link": 1097
              }
            ],
            "outputs": [
              {
                "localized_name": "list",
                "name": "list",
                "shape": 6,
                "type": "*",
                "links": [
                  1096
                ]
              },
              {
                "localized_name": "item",
                "name": "item",
                "type": "*",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: DataListPop",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              -1
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 700,
            "type": "Basic data handling: DataListPop",
            "pos": [
              2560,
              1630
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": true
            },
            "order": 5,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "list",
                "name": "list",
                "type": "*",
                "link": 1022
              },
              {
                "localized_name": "index",
                "name": "index",
                "shape": 7,
                "type": "INT",
                "widget": {
                  "name": "index"
                },
                "link": 1016
              }
            ],
            "outputs": [
              {
                "localized_name": "list",
                "name": "list",
                "shape": 6,
                "type": "*",
                "links": [
                  1089
                ]
              },
              {
                "localized_name": "item",
                "name": "item",
                "type": "*",
                "links": null
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: DataListPop",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              -1
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 748,
            "type": "Basic data handling: IfElse",
            "pos": [
              2660,
              1780
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": true
            },
            "order": 11,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 1096
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 1099
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 1098
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  1112
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 759,
            "type": "Basic data handling: DataListSort",
            "pos": [
              2800,
              1780
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 12,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "list",
                "name": "list",
                "type": "*",
                "link": 1112
              }
            ],
            "outputs": [
              {
                "localized_name": "list",
                "name": "list",
                "shape": 6,
                "type": "*",
                "links": [
                  1113
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: DataListSort",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              "False"
            ],
            "color": "#332922",
            "bgcolor": "#593930"
          },
          {
            "id": 743,
            "type": "Basic data handling: IfElse",
            "pos": [
              2670,
              1650
            ],
            "size": [
              210,
              80
            ],
            "flags": {
              "collapsed": true
            },
            "order": 8,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 1089
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 1090
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 1092
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  1093,
                  1097,
                  1099
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 698,
            "type": "PrimitiveString",
            "pos": [
              2170,
              1750
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  1018
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveString",
              "cnr_id": "comfy-core",
              "ver": "0.3.60"
            },
            "widgets_values": [
              "Thumbs.db"
            ],
            "color": "#233",
            "bgcolor": "#355"
          },
          {
            "id": 640,
            "type": "Basic data handling: PathListDir",
            "pos": [
              2170,
              1480
            ],
            "size": [
              210,
              110
            ],
            "flags": {
              "collapsed": false
            },
            "order": 3,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "path",
                "name": "path",
                "type": "STRING",
                "widget": {
                  "name": "path"
                },
                "link": 943
              }
            ],
            "outputs": [
              {
                "localized_name": "entries",
                "name": "entries",
                "shape": 6,
                "type": "STRING",
                "links": [
                  1021,
                  1022,
                  1090
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: PathListDir",
              "cnr_id": "basic_data_handling",
              "ver": "0.6.0"
            },
            "widgets_values": [
              "",
              true,
              false
            ],
            "color": "#332922",
            "bgcolor": "#593930"
          },
          {
            "id": 758,
            "type": "MarkdownNote",
            "pos": [
              2170,
              1160
            ],
            "size": [
              360,
              270
            ],
            "flags": {},
            "order": 2,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "title": "Filter Input List",
            "properties": {},
            "widgets_values": [
              "## - Get list of files in directory\n## - Remove OS artifacts from the file list\n## - Sort the list\n## - Return filtered list\n## - This is inefficient because it runs every iteration. But even with hundreds of input files, it's not inefficient enough to affect performance, so we don't care."
            ],
            "color": "#223",
            "bgcolor": "#335"
          }
        ],
        "groups": [],
        "links": [
          {
            "id": 1021,
            "origin_id": 640,
            "origin_slot": 0,
            "target_id": 699,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 1015,
            "origin_id": 697,
            "origin_slot": 0,
            "target_id": 699,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 1022,
            "origin_id": 640,
            "origin_slot": 0,
            "target_id": 700,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 1016,
            "origin_id": 699,
            "origin_slot": 0,
            "target_id": 700,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 1093,
            "origin_id": 743,
            "origin_slot": 0,
            "target_id": 701,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 1018,
            "origin_id": 698,
            "origin_slot": 0,
            "target_id": 701,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 1091,
            "origin_id": 699,
            "origin_slot": 0,
            "target_id": 746,
            "target_slot": 0,
            "type": "FLOAT,INT"
          },
          {
            "id": 1097,
            "origin_id": 743,
            "origin_slot": 0,
            "target_id": 702,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 1094,
            "origin_id": 701,
            "origin_slot": 0,
            "target_id": 747,
            "target_slot": 0,
            "type": "FLOAT,INT"
          },
          {
            "id": 1089,
            "origin_id": 700,
            "origin_slot": 0,
            "target_id": 743,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 1090,
            "origin_id": 640,
            "origin_slot": 0,
            "target_id": 743,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 1092,
            "origin_id": 746,
            "origin_slot": 0,
            "target_id": 743,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 1096,
            "origin_id": 702,
            "origin_slot": 0,
            "target_id": 748,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 1099,
            "origin_id": 743,
            "origin_slot": 0,
            "target_id": 748,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 1098,
            "origin_id": 747,
            "origin_slot": 0,
            "target_id": 748,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 943,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 640,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 1112,
            "origin_id": 748,
            "origin_slot": 0,
            "target_id": 759,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 1113,
            "origin_id": 759,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "*"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "80597ad3-cf64-4c5c-aeaf-fa576a7520db",
        "version": 1,
        "state": {
          "lastGroupId": 13,
          "lastNodeId": 439,
          "lastLinkId": 847,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Wan 2.2 VACE - 2 KSampler",
        "inputNode": {
          "id": -10,
          "bounding": [
            -9300,
            6260,
            179.48333740234375,
            360
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            -6090,
            6290,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "6afbdfc8-3ce3-42dd-9c86-5634f374d35f",
            "name": "model",
            "type": "MODEL",
            "linkIds": [
              795
            ],
            "label": "model_high",
            "pos": [
              -9140.516662597656,
              6280
            ]
          },
          {
            "id": "85f0a1a0-8c9e-4255-ac94-8b8978be7118",
            "name": "model_1",
            "type": "MODEL",
            "linkIds": [
              756
            ],
            "label": "model_low",
            "pos": [
              -9140.516662597656,
              6300
            ]
          },
          {
            "id": "b1c3ca93-333e-4bab-be60-a07fd6a536b7",
            "name": "clip",
            "type": "CLIP",
            "linkIds": [
              757
            ],
            "pos": [
              -9140.516662597656,
              6320
            ]
          },
          {
            "id": "f6ccf709-cfae-45df-9f9f-3be906d69867",
            "name": "vae",
            "type": "VAE",
            "linkIds": [
              758
            ],
            "pos": [
              -9140.516662597656,
              6340
            ]
          },
          {
            "id": "c170d853-b3dd-4cd2-9a6a-3b7fefc24ef9",
            "name": "IMAGE",
            "type": "IMAGE",
            "linkIds": [
              764
            ],
            "label": "control_video",
            "pos": [
              -9140.516662597656,
              6360
            ]
          },
          {
            "id": "d4203248-08d4-4b11-9b3d-a325eb7fd592",
            "name": "MASK",
            "type": "MASK",
            "linkIds": [
              765
            ],
            "label": "control_mask",
            "pos": [
              -9140.516662597656,
              6380
            ]
          },
          {
            "id": "30543da1-9a16-46c2-9de4-fc7de2843387",
            "name": "value",
            "type": "STRING",
            "linkIds": [
              825
            ],
            "label": "positive_prompt",
            "pos": [
              -9140.516662597656,
              6400
            ]
          },
          {
            "id": "9eaa30f2-02e1-4af7-91a0-05e29bce569e",
            "name": "value_1",
            "type": "STRING",
            "linkIds": [
              823
            ],
            "label": "negative_prompt",
            "pos": [
              -9140.516662597656,
              6420
            ]
          },
          {
            "id": "cc40d5bb-edba-4325-9e8d-49e410849d51",
            "name": "value_2",
            "type": "INT",
            "linkIds": [
              818
            ],
            "label": "width",
            "pos": [
              -9140.516662597656,
              6440
            ]
          },
          {
            "id": "4996ab77-c683-45e9-b95f-71cd01d001ca",
            "name": "value_3",
            "type": "INT",
            "linkIds": [
              819
            ],
            "label": "height",
            "pos": [
              -9140.516662597656,
              6460
            ]
          },
          {
            "id": "31768b8f-63d4-45d9-9109-ffc5494dc41d",
            "name": "value_4",
            "type": "INT",
            "linkIds": [
              820
            ],
            "label": "length",
            "pos": [
              -9140.516662597656,
              6480
            ]
          },
          {
            "id": "345b901a-54f1-4fe6-a752-d8eb6e92709e",
            "name": "value_7",
            "type": "INT",
            "linkIds": [
              821
            ],
            "label": "seed",
            "pos": [
              -9140.516662597656,
              6500
            ]
          },
          {
            "id": "6f7b459d-8613-4603-9366-fa5a5a668c8e",
            "name": "value_8",
            "type": "BOOLEAN",
            "linkIds": [
              810
            ],
            "label": "‚û°Ô∏èenable_torch_compile",
            "pos": [
              -9140.516662597656,
              6520
            ]
          },
          {
            "id": "b29cf1f4-1670-4d97-a09e-c2ceac6f5ca4",
            "name": "value_9",
            "type": "BOOLEAN",
            "linkIds": [
              811
            ],
            "label": "‚û°Ô∏èsage_attention",
            "pos": [
              -9140.516662597656,
              6540
            ]
          },
          {
            "id": "7b7b01df-24ff-4366-a97e-d30f174f003d",
            "name": "value_10",
            "type": "BOOLEAN",
            "linkIds": [
              812
            ],
            "label": "‚û°Ô∏ènag",
            "pos": [
              -9140.516662597656,
              6560
            ]
          },
          {
            "id": "ea161c8c-4445-460d-9424-a5c679f8eb65",
            "name": "value_11",
            "type": "BOOLEAN",
            "linkIds": [
              813
            ],
            "label": "‚û°Ô∏èlightx2v",
            "pos": [
              -9140.516662597656,
              6580
            ]
          }
        ],
        "outputs": [
          {
            "id": "a6f2c77a-9ed4-4669-b862-29593d637bee",
            "name": "IMAGE",
            "type": "IMAGE",
            "linkIds": [
              778
            ],
            "label": "image",
            "pos": [
              -6070,
              6310
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 216,
            "type": "GetNode",
            "pos": [
              -6960,
              5750
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 0,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  408,
                  415
                ]
              }
            ],
            "title": "Get_torch_compile",
            "properties": {},
            "widgets_values": [
              "torch_compile"
            ]
          },
          {
            "id": 298,
            "type": "GetNode",
            "pos": [
              -8160,
              6530
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 1,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  548
                ]
              }
            ],
            "title": "Get_height",
            "properties": {},
            "widgets_values": [
              "height"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 299,
            "type": "GetNode",
            "pos": [
              -8160,
              6570
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 2,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  549
                ]
              }
            ],
            "title": "Get_length",
            "properties": {},
            "widgets_values": [
              "length"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 136,
            "type": "TorchCompileModelWanVideoV2",
            "pos": [
              -7330,
              5590
            ],
            "size": [
              350,
              202
            ],
            "flags": {},
            "order": 38,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 676
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  237,
                  409
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "TorchCompileModelWanVideoV2",
              "cnr_id": "comfyui-kjnodes",
              "ver": "36f6fdd7d4c393675ac622bd300ef667ee65d8b8"
            },
            "widgets_values": [
              "inductor",
              false,
              "default",
              false,
              true,
              64,
              true
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 170,
            "type": "TorchCompileModelWanVideoV2",
            "pos": [
              -7330,
              5830
            ],
            "size": [
              350,
              202
            ],
            "flags": {},
            "order": 37,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 673
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  238,
                  413
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "TorchCompileModelWanVideoV2",
              "cnr_id": "comfyui-kjnodes",
              "ver": "36f6fdd7d4c393675ac622bd300ef667ee65d8b8"
            },
            "widgets_values": [
              "inductor",
              false,
              "default",
              false,
              true,
              64,
              true
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 325,
            "type": "GetNode",
            "pos": [
              -6280,
              5790
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 3,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  508,
                  509
                ]
              }
            ],
            "title": "Get_lightx2v",
            "properties": {},
            "widgets_values": [
              "lightx2v"
            ]
          },
          {
            "id": 297,
            "type": "GetNode",
            "pos": [
              -8160,
              6490
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 4,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  547
                ]
              }
            ],
            "title": "Get_width",
            "properties": {},
            "widgets_values": [
              "width"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 239,
            "type": "SetNode",
            "pos": [
              -8760,
              6590
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 51,
            "mode": 0,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 814
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_seed",
            "properties": {
              "previousName": "seed"
            },
            "widgets_values": [
              "seed"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 289,
            "type": "SetNode",
            "pos": [
              -8760,
              6550
            ],
            "size": [
              210,
              50
            ],
            "flags": {
              "collapsed": true
            },
            "order": 54,
            "mode": 0,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 815
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_length",
            "properties": {
              "previousName": "length"
            },
            "widgets_values": [
              "length"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 288,
            "type": "SetNode",
            "pos": [
              -8760,
              6510
            ],
            "size": [
              210,
              50
            ],
            "flags": {
              "collapsed": true
            },
            "order": 53,
            "mode": 0,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 816
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_height",
            "properties": {
              "previousName": "height"
            },
            "widgets_values": [
              "height"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 213,
            "type": "SetNode",
            "pos": [
              -8760,
              6630
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 50,
            "mode": 0,
            "inputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "link": 809
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_torch_compile",
            "properties": {
              "previousName": "torch_compile"
            },
            "widgets_values": [
              "torch_compile"
            ]
          },
          {
            "id": 369,
            "type": "SetNode",
            "pos": [
              -7500,
              6350
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 28,
            "mode": 0,
            "inputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "link": 618
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": []
              }
            ],
            "title": "Set_negative",
            "properties": {
              "previousName": "negative"
            },
            "widgets_values": [
              "negative"
            ],
            "color": "#332922",
            "bgcolor": "#593930"
          },
          {
            "id": 322,
            "type": "Basic data handling: IfElse",
            "pos": [
              -6290,
              5650
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 45,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 649
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 666
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 508
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  844
                ]
              }
            ],
            "title": "lightx2v?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 387,
            "type": "SetNode",
            "pos": [
              -8760,
              6670
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 60,
            "mode": 0,
            "inputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "link": 808
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_sage_attention",
            "properties": {
              "previousName": "sage_attention"
            },
            "widgets_values": [
              "sage_attention"
            ]
          },
          {
            "id": 390,
            "type": "SetNode",
            "pos": [
              -8760,
              6710
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 61,
            "mode": 0,
            "inputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "link": 807
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_nag",
            "properties": {
              "previousName": "nag"
            },
            "widgets_values": [
              "nag"
            ]
          },
          {
            "id": 275,
            "type": "Basic data handling: IfElse",
            "pos": [
              -6950,
              5820
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 40,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 413
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 674
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 415
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  663,
                  664
                ]
              }
            ],
            "title": "compile?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 272,
            "type": "Basic data handling: IfElse",
            "pos": [
              -6950,
              5590
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 41,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 409
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 675
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 408
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  665,
                  666
                ]
              }
            ],
            "title": "compile?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 391,
            "type": "GetNode",
            "pos": [
              -7760,
              5820
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 5,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  669,
                  670
                ]
              }
            ],
            "title": "Get_nag",
            "properties": {},
            "widgets_values": [
              "nag"
            ]
          },
          {
            "id": 316,
            "type": "GetNode",
            "pos": [
              -8010,
              5810
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 6,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  489,
                  490
                ]
              }
            ],
            "title": "Get_negative",
            "properties": {},
            "widgets_values": [
              "negative"
            ],
            "color": "#332922",
            "bgcolor": "#593930"
          },
          {
            "id": 392,
            "type": "Basic data handling: IfElse",
            "pos": [
              -7630,
              5620
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 35,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 671
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 679
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 670
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  675,
                  676
                ]
              }
            ],
            "title": "NAG?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 393,
            "type": "Basic data handling: IfElse",
            "pos": [
              -7630,
              5860
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 34,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 672
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 680
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 669
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  673,
                  674
                ]
              }
            ],
            "title": "NAG?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 388,
            "type": "GetNode",
            "pos": [
              -8480,
              5800
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 7,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  661,
                  662
                ]
              }
            ],
            "title": "Get_sage_attention",
            "properties": {},
            "widgets_values": [
              "sage_attention"
            ]
          },
          {
            "id": 324,
            "type": "SetNode",
            "pos": [
              -8760,
              6750
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 55,
            "mode": 0,
            "inputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "link": 806
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_lightx2v",
            "properties": {
              "previousName": "lightx2v"
            },
            "widgets_values": [
              "lightx2v"
            ]
          },
          {
            "id": 417,
            "type": "SetNode",
            "pos": [
              -8760,
              6190
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 63,
            "mode": 0,
            "inputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "link": 756
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_model_low",
            "properties": {
              "previousName": "model_low"
            },
            "widgets_values": [
              "model_low"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 418,
            "type": "SetNode",
            "pos": [
              -8760,
              6230
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 64,
            "mode": 0,
            "inputs": [
              {
                "name": "CLIP",
                "type": "CLIP",
                "link": 757
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_clip",
            "properties": {
              "previousName": "clip"
            },
            "widgets_values": [
              "clip"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 356,
            "type": "GetNode",
            "pos": [
              -8360,
              6270
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 8,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "STRING",
                "type": "STRING",
                "links": [
                  587
                ]
              }
            ],
            "title": "Get_positive_prompt",
            "properties": {},
            "widgets_values": [
              "positive_prompt"
            ]
          },
          {
            "id": 355,
            "type": "GetNode",
            "pos": [
              -8360,
              6350
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 9,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "STRING",
                "type": "STRING",
                "links": [
                  760
                ]
              }
            ],
            "title": "Get_negative_prompt",
            "properties": {},
            "widgets_values": [
              "negative_prompt"
            ]
          },
          {
            "id": 420,
            "type": "GetNode",
            "pos": [
              -8360,
              6310
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 10,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  759,
                  761
                ]
              }
            ],
            "title": "Get_clip",
            "properties": {},
            "widgets_values": [
              "clip"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 193,
            "type": "CLIPTextEncode",
            "pos": [
              -8160,
              6290
            ],
            "size": [
              250,
              90
            ],
            "flags": {
              "collapsed": true
            },
            "order": 22,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 761
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 587
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  762
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "CLIPTextEncode",
              "cnr_id": "comfy-core",
              "ver": "0.3.45",
              "widget_ue_connectable": {}
            },
            "widgets_values": [
              ""
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 197,
            "type": "GetNode",
            "pos": [
              -8160,
              6370
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 11,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "VAE",
                "type": "VAE",
                "links": [
                  546
                ]
              }
            ],
            "title": "Get_vae",
            "properties": {},
            "widgets_values": [
              "vae"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 194,
            "type": "CLIPTextEncode",
            "pos": [
              -8160,
              6330
            ],
            "size": [
              281.4833282470703,
              88
            ],
            "flags": {
              "collapsed": true
            },
            "order": 21,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 759
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 760
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "slot_index": 0,
                "links": [
                  763
                ]
              }
            ],
            "title": "CLIP Text Encode (Negative Prompt)",
            "properties": {
              "Node name for S&R": "CLIPTextEncode",
              "cnr_id": "comfy-core",
              "ver": "0.3.34",
              "widget_ue_connectable": {}
            },
            "widgets_values": [
              ""
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 358,
            "type": "GetNode",
            "pos": [
              -8160,
              6450
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 12,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "links": [
                  589
                ]
              }
            ],
            "title": "Get_control_mask",
            "properties": {},
            "widgets_values": [
              "control_mask"
            ],
            "color": "#1c5715",
            "bgcolor": "#1f401b"
          },
          {
            "id": 346,
            "type": "SetNode",
            "pos": [
              -7500,
              6400
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 30,
            "mode": 0,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 568
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_trim_latent",
            "properties": {
              "previousName": "trim_latent"
            },
            "widgets_values": [
              "trim_latent"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 416,
            "type": "SetNode",
            "pos": [
              -8760,
              6150
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 62,
            "mode": 0,
            "inputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "link": 795
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_model_high",
            "properties": {
              "previousName": "model_high"
            },
            "widgets_values": [
              "model_high"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 422,
            "type": "GetNode",
            "pos": [
              -8770,
              5890
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 13,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  780,
                  782
                ]
              }
            ],
            "title": "Get_model_low",
            "properties": {},
            "widgets_values": [
              "model_low"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 421,
            "type": "GetNode",
            "pos": [
              -8780,
              5690
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 14,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  779,
                  781
                ]
              }
            ],
            "title": "Get_model_high",
            "properties": {},
            "widgets_values": [
              "model_high"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 384,
            "type": "Basic data handling: IfElse",
            "pos": [
              -8280,
              5660
            ],
            "size": [
              210,
              78
            ],
            "flags": {},
            "order": 27,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 658
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 781
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 661
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  677,
                  679
                ]
              }
            ],
            "title": "sage attention?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "1.0.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 385,
            "type": "Basic data handling: IfElse",
            "pos": [
              -8280,
              5860
            ],
            "size": [
              210,
              78
            ],
            "flags": {},
            "order": 26,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 654
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 782
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 662
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  678,
                  680
                ]
              }
            ],
            "title": "sage attention?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "1.0.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 357,
            "type": "GetNode",
            "pos": [
              -8160,
              6410
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 15,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  588
                ]
              }
            ],
            "title": "Get_control_video",
            "properties": {},
            "widgets_values": [
              "control_video"
            ],
            "color": "#2a363b",
            "bgcolor": "#3f5159"
          },
          {
            "id": 414,
            "type": "GetNode",
            "pos": [
              -6470,
              6350
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 16,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "VAE",
                "type": "VAE",
                "links": [
                  783
                ]
              }
            ],
            "title": "Get_vae",
            "properties": {},
            "widgets_values": [
              "vae"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 195,
            "type": "VAEDecode",
            "pos": [
              -6290,
              6300
            ],
            "size": [
              140,
              46
            ],
            "flags": {
              "collapsed": false
            },
            "order": 39,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 572
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 783
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  284,
                  778
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "VAEDecode",
              "cnr_id": "comfy-core",
              "ver": "0.3.73"
            },
            "widgets_values": [],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 314,
            "type": "WanVideoNAG",
            "pos": [
              -7860,
              5620
            ],
            "size": [
              210,
              150
            ],
            "flags": {},
            "order": 32,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 677
              },
              {
                "localized_name": "conditioning",
                "name": "conditioning",
                "type": "CONDITIONING",
                "link": 490
              }
            ],
            "outputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "links": [
                  671
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "WanVideoNAG",
              "cnr_id": "comfyui-kjnodes",
              "ver": "acdd16a973460b5be5d92133a9217787f0e085c6"
            },
            "widgets_values": [
              11,
              0.25,
              2.5,
              "default"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 287,
            "type": "SetNode",
            "pos": [
              -8760,
              6470
            ],
            "size": [
              210,
              50
            ],
            "flags": {
              "collapsed": true
            },
            "order": 52,
            "mode": 0,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 817
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_width",
            "properties": {
              "previousName": "width"
            },
            "widgets_values": [
              "width"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 429,
            "type": "PrimitiveBoolean",
            "pos": [
              -8900,
              6630
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 69,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "BOOLEAN",
                "widget": {
                  "name": "value"
                },
                "link": 810
              }
            ],
            "outputs": [
              {
                "localized_name": "BOOLEAN",
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  809
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveBoolean",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              false
            ]
          },
          {
            "id": 428,
            "type": "PrimitiveBoolean",
            "pos": [
              -8900,
              6670
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 68,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "BOOLEAN",
                "widget": {
                  "name": "value"
                },
                "link": 811
              }
            ],
            "outputs": [
              {
                "localized_name": "BOOLEAN",
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  808
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveBoolean",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              false
            ]
          },
          {
            "id": 427,
            "type": "PrimitiveBoolean",
            "pos": [
              -8900,
              6710
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 67,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "BOOLEAN",
                "widget": {
                  "name": "value"
                },
                "link": 812
              }
            ],
            "outputs": [
              {
                "localized_name": "BOOLEAN",
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  807
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveBoolean",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              false
            ]
          },
          {
            "id": 426,
            "type": "PrimitiveBoolean",
            "pos": [
              -8900,
              6750
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 66,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "BOOLEAN",
                "widget": {
                  "name": "value"
                },
                "link": 813
              }
            ],
            "outputs": [
              {
                "localized_name": "BOOLEAN",
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  806
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveBoolean",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 433,
            "type": "PrimitiveInt",
            "pos": [
              -8870,
              6470
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 73,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 818
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  817
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveInt",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              0,
              "fixed"
            ]
          },
          {
            "id": 432,
            "type": "PrimitiveInt",
            "pos": [
              -8870,
              6510
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 72,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 819
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  816
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveInt",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              0,
              "fixed"
            ]
          },
          {
            "id": 431,
            "type": "PrimitiveInt",
            "pos": [
              -8870,
              6550
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 71,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 820
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  815
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveInt",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              0,
              "fixed"
            ]
          },
          {
            "id": 435,
            "type": "PrimitiveString",
            "pos": [
              -8890,
              6390
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 75,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "STRING",
                "widget": {
                  "name": "value"
                },
                "link": 825
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  824
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveString",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 434,
            "type": "PrimitiveString",
            "pos": [
              -8890,
              6430
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 74,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "STRING",
                "widget": {
                  "name": "value"
                },
                "link": 823
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  822
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveString",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 419,
            "type": "SetNode",
            "pos": [
              -8760,
              6270
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 65,
            "mode": 0,
            "inputs": [
              {
                "name": "VAE",
                "type": "VAE",
                "link": 758
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_vae",
            "properties": {
              "previousName": "vae"
            },
            "widgets_values": [
              "vae"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 352,
            "type": "SetNode",
            "pos": [
              -8760,
              6310
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 58,
            "mode": 0,
            "inputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "link": 764
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_control_video",
            "properties": {
              "previousName": "control_video"
            },
            "widgets_values": [
              "control_video"
            ],
            "color": "#2a363b",
            "bgcolor": "#3f5159"
          },
          {
            "id": 430,
            "type": "PrimitiveInt",
            "pos": [
              -8870,
              6590
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 70,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 821
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  814
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveInt",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              0,
              "fixed"
            ]
          },
          {
            "id": 350,
            "type": "SetNode",
            "pos": [
              -8760,
              6390
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 56,
            "mode": 0,
            "inputs": [
              {
                "name": "STRING",
                "type": "STRING",
                "link": 824
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_positive_prompt",
            "properties": {
              "previousName": "positive_prompt"
            },
            "widgets_values": [
              "positive_prompt"
            ]
          },
          {
            "id": 353,
            "type": "SetNode",
            "pos": [
              -8760,
              6350
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 59,
            "mode": 0,
            "inputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "link": 765
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_control_mask",
            "properties": {
              "previousName": "control_mask"
            },
            "widgets_values": [
              "control_mask"
            ],
            "color": "#1c5715",
            "bgcolor": "#1f401b"
          },
          {
            "id": 351,
            "type": "SetNode",
            "pos": [
              -8760,
              6430
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 57,
            "mode": 0,
            "inputs": [
              {
                "name": "STRING",
                "type": "STRING",
                "link": 822
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_negative_prompt",
            "properties": {
              "previousName": "negative_prompt"
            },
            "widgets_values": [
              "negative_prompt"
            ]
          },
          {
            "id": 315,
            "type": "WanVideoNAG",
            "pos": [
              -7870,
              5860
            ],
            "size": [
              210,
              150
            ],
            "flags": {},
            "order": 31,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 678
              },
              {
                "localized_name": "conditioning",
                "name": "conditioning",
                "type": "CONDITIONING",
                "link": 489
              }
            ],
            "outputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "links": [
                  672
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "WanVideoNAG",
              "cnr_id": "comfyui-kjnodes",
              "ver": "acdd16a973460b5be5d92133a9217787f0e085c6"
            },
            "widgets_values": [
              11,
              0.25,
              2.5,
              "default"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 347,
            "type": "GetNode",
            "pos": [
              -6630,
              6390
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 17,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  569
                ]
              }
            ],
            "title": "Get_trim_latent",
            "properties": {},
            "widgets_values": [
              "trim_latent"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 340,
            "type": "WanVaceToVideo",
            "pos": [
              -7850,
              6300
            ],
            "size": [
              270,
              260
            ],
            "flags": {},
            "order": 25,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 762
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 763
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 546
              },
              {
                "localized_name": "control_video",
                "name": "control_video",
                "shape": 7,
                "type": "IMAGE",
                "link": 588
              },
              {
                "localized_name": "control_masks",
                "name": "control_masks",
                "shape": 7,
                "type": "MASK",
                "link": 589
              },
              {
                "localized_name": "reference_image",
                "name": "reference_image",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 547
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 548
              },
              {
                "localized_name": "length",
                "name": "length",
                "type": "INT",
                "widget": {
                  "name": "length"
                },
                "link": 549
              }
            ],
            "outputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  832,
                  834
                ]
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  618,
                  833,
                  835
                ]
              },
              {
                "localized_name": "latent",
                "name": "latent",
                "type": "LATENT",
                "links": [
                  829
                ]
              },
              {
                "localized_name": "trim_latent",
                "name": "trim_latent",
                "type": "INT",
                "links": [
                  568
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "WanVaceToVideo",
              "cnr_id": "comfy-core",
              "ver": "0.3.75"
            },
            "widgets_values": [
              832,
              480,
              81,
              1,
              1
            ],
            "color": "#323",
            "bgcolor": "#535"
          },
          {
            "id": 135,
            "type": "PathchSageAttentionKJ",
            "pos": [
              -8560,
              5660
            ],
            "size": [
              260,
              82
            ],
            "flags": {},
            "order": 24,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 779
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  658
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PathchSageAttentionKJ",
              "cnr_id": "comfyui-kjnodes",
              "ver": "36f6fdd7d4c393675ac622bd300ef667ee65d8b8"
            },
            "widgets_values": [
              "sageattn_qk_int8_pv_fp8_cuda++",
              false
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 169,
            "type": "PathchSageAttentionKJ",
            "pos": [
              -8560,
              5860
            ],
            "size": [
              260,
              82
            ],
            "flags": {},
            "order": 23,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 780
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  654
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PathchSageAttentionKJ",
              "cnr_id": "comfyui-kjnodes",
              "ver": "36f6fdd7d4c393675ac622bd300ef667ee65d8b8"
            },
            "widgets_values": [
              "sageattn_qk_int8_pv_fp8_cuda++",
              false
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 240,
            "type": "GetNode",
            "pos": [
              -7350,
              6410
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 18,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  836,
                  837
                ]
              }
            ],
            "title": "Get_seed",
            "properties": {},
            "widgets_values": [
              "seed"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 345,
            "type": "TrimVideoLatent",
            "pos": [
              -6470,
              6300
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 36,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 831
              },
              {
                "localized_name": "trim_amount",
                "name": "trim_amount",
                "type": "INT",
                "widget": {
                  "name": "trim_amount"
                },
                "link": 569
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  572
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "TrimVideoLatent",
              "cnr_id": "comfy-core",
              "ver": "0.3.75"
            },
            "widgets_values": [
              0
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 326,
            "type": "Basic data handling: IfElse",
            "pos": [
              -6290,
              5850
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 44,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 510
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 664
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 509
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  842
                ]
              }
            ],
            "title": "lightx2v?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 203,
            "type": "SetNode",
            "pos": [
              -5800,
              5880
            ],
            "size": [
              223.45000305175782,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 48,
            "mode": 0,
            "inputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "link": 846
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_model_low_conditioned",
            "properties": {
              "previousName": "model_low_conditioned"
            },
            "widgets_values": [
              "model_low_conditioned"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 439,
            "type": "ModelSamplingSD3",
            "pos": [
              -6040,
              5850
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 46,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 842
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  846
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ModelSamplingSD3",
              "cnr_id": "comfy-core",
              "ver": "0.4.0"
            },
            "widgets_values": [
              5
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 438,
            "type": "ModelSamplingSD3",
            "pos": [
              -6040,
              5650
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 47,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 844
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  845
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ModelSamplingSD3",
              "cnr_id": "comfy-core",
              "ver": "0.4.0"
            },
            "widgets_values": [
              5
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 202,
            "type": "SetNode",
            "pos": [
              -5800,
              5680
            ],
            "size": [
              229.01666870117188,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 49,
            "mode": 0,
            "inputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "link": 845
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_model_high_conditioned",
            "properties": {
              "previousName": "model_high_conditioned"
            },
            "widgets_values": [
              "model_high_conditioned"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 204,
            "type": "GetNode",
            "pos": [
              -7180,
              6240
            ],
            "size": [
              230.48332824707032,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 19,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  847
                ]
              }
            ],
            "title": "Get_model_high_conditioned",
            "properties": {},
            "widgets_values": [
              "model_high_conditioned"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 205,
            "type": "GetNode",
            "pos": [
              -6870,
              6240
            ],
            "size": [
              224.91666259765626,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 20,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  843
                ]
              }
            ],
            "title": "Get_model_low_conditioned",
            "properties": {},
            "widgets_values": [
              "model_low_conditioned"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 436,
            "type": "KSamplerAdvanced",
            "pos": [
              -7200,
              6280
            ],
            "size": [
              252.38333129882812,
              478.7156238555908
            ],
            "flags": {},
            "order": 29,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 847
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 832
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 833
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 829
              },
              {
                "localized_name": "noise_seed",
                "name": "noise_seed",
                "type": "INT",
                "widget": {
                  "name": "noise_seed"
                },
                "link": 836
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  830
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "KSamplerAdvanced",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              "enable",
              0,
              "fixed",
              6,
              1,
              "euler",
              "simple",
              0,
              1,
              "enable"
            ],
            "color": "#323",
            "bgcolor": "#535"
          },
          {
            "id": 437,
            "type": "KSamplerAdvanced",
            "pos": [
              -6890,
              6277.000002861023
            ],
            "size": [
              252.38333129882812,
              478.7156238555908
            ],
            "flags": {},
            "order": 33,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 843
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 834
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 835
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 830
              },
              {
                "localized_name": "noise_seed",
                "name": "noise_seed",
                "type": "INT",
                "widget": {
                  "name": "noise_seed"
                },
                "link": 837
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  831
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "KSamplerAdvanced",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              "disable",
              0,
              "fixed",
              6,
              1,
              "euler",
              "simple",
              1,
              6,
              "disable"
            ],
            "color": "#323",
            "bgcolor": "#535"
          },
          {
            "id": 320,
            "type": "LoraLoaderModelOnly",
            "pos": [
              -6660,
              5850
            ],
            "size": [
              330,
              90
            ],
            "flags": {},
            "order": 42,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 663
              },
              {
                "label": "lora_low",
                "localized_name": "lora_name",
                "name": "lora_name",
                "type": "COMBO",
                "widget": {
                  "name": "lora_name"
                },
                "link": null
              },
              {
                "label": "lora_low_strength",
                "localized_name": "strength_model",
                "name": "strength_model",
                "type": "FLOAT",
                "widget": {
                  "name": "strength_model"
                },
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  510
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "LoraLoaderModelOnly",
              "cnr_id": "comfy-core",
              "ver": "0.3.73"
            },
            "widgets_values": [
              "Wan 2.2\\T2V\\wan2.2_t2v_A14b_low_noise_lora_rank64_lightx2v_4step_1217.safetensors",
              0.7
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 319,
            "type": "LoraLoaderModelOnly",
            "pos": [
              -6650,
              5650
            ],
            "size": [
              330,
              90
            ],
            "flags": {},
            "order": 43,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 665
              },
              {
                "label": "lora_high",
                "localized_name": "lora_name",
                "name": "lora_name",
                "type": "COMBO",
                "widget": {
                  "name": "lora_name"
                },
                "link": null
              },
              {
                "label": "lora_high_strength",
                "localized_name": "strength_model",
                "name": "strength_model",
                "type": "FLOAT",
                "widget": {
                  "name": "strength_model"
                },
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  649
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "LoraLoaderModelOnly",
              "cnr_id": "comfy-core",
              "ver": "0.3.73"
            },
            "widgets_values": [
              "Wan 2.2\\T2V\\wan2.2_t2v_A14b_high_noise_lora_rank64_lightx2v_4step_1217.safetensors",
              0.7
            ],
            "color": "#322",
            "bgcolor": "#533"
          }
        ],
        "groups": [
          {
            "id": 6,
            "title": "Lightx2v",
            "bounding": [
              -6690,
              5560,
              620,
              423.6
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "Torch Compile",
            "bounding": [
              -7340,
              5520,
              610,
              517.6
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 11,
            "title": "Sage Attention",
            "bounding": [
              -8590,
              5570,
              530,
              401.6
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 12,
            "title": "NAG",
            "bounding": [
              -8020,
              5540,
              610,
              480
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 284,
            "origin_id": 195,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 408,
            "origin_id": 216,
            "origin_slot": 0,
            "target_id": 272,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 409,
            "origin_id": 136,
            "origin_slot": 0,
            "target_id": 272,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 413,
            "origin_id": 170,
            "origin_slot": 0,
            "target_id": 275,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 415,
            "origin_id": 216,
            "origin_slot": 0,
            "target_id": 275,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 489,
            "origin_id": 316,
            "origin_slot": 0,
            "target_id": 315,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 490,
            "origin_id": 316,
            "origin_slot": 0,
            "target_id": 314,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 508,
            "origin_id": 325,
            "origin_slot": 0,
            "target_id": 322,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 509,
            "origin_id": 325,
            "origin_slot": 0,
            "target_id": 326,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 510,
            "origin_id": 320,
            "origin_slot": 0,
            "target_id": 326,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 546,
            "origin_id": 197,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 2,
            "type": "VAE"
          },
          {
            "id": 547,
            "origin_id": 297,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 6,
            "type": "INT"
          },
          {
            "id": 548,
            "origin_id": 298,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 7,
            "type": "INT"
          },
          {
            "id": 549,
            "origin_id": 299,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 8,
            "type": "INT"
          },
          {
            "id": 568,
            "origin_id": 340,
            "origin_slot": 3,
            "target_id": 346,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 569,
            "origin_id": 347,
            "origin_slot": 0,
            "target_id": 345,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 572,
            "origin_id": 345,
            "origin_slot": 0,
            "target_id": 195,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 587,
            "origin_id": 356,
            "origin_slot": 0,
            "target_id": 193,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 588,
            "origin_id": 357,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 3,
            "type": "IMAGE"
          },
          {
            "id": 589,
            "origin_id": 358,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 4,
            "type": "MASK"
          },
          {
            "id": 618,
            "origin_id": 340,
            "origin_slot": 1,
            "target_id": 369,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 649,
            "origin_id": 319,
            "origin_slot": 0,
            "target_id": 322,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 654,
            "origin_id": 169,
            "origin_slot": 0,
            "target_id": 385,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 658,
            "origin_id": 135,
            "origin_slot": 0,
            "target_id": 384,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 661,
            "origin_id": 388,
            "origin_slot": 0,
            "target_id": 384,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 662,
            "origin_id": 388,
            "origin_slot": 0,
            "target_id": 385,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 663,
            "origin_id": 275,
            "origin_slot": 0,
            "target_id": 320,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 664,
            "origin_id": 275,
            "origin_slot": 0,
            "target_id": 326,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 665,
            "origin_id": 272,
            "origin_slot": 0,
            "target_id": 319,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 666,
            "origin_id": 272,
            "origin_slot": 0,
            "target_id": 322,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 669,
            "origin_id": 391,
            "origin_slot": 0,
            "target_id": 393,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 670,
            "origin_id": 391,
            "origin_slot": 0,
            "target_id": 392,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 671,
            "origin_id": 314,
            "origin_slot": 0,
            "target_id": 392,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 672,
            "origin_id": 315,
            "origin_slot": 0,
            "target_id": 393,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 673,
            "origin_id": 393,
            "origin_slot": 0,
            "target_id": 170,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 674,
            "origin_id": 393,
            "origin_slot": 0,
            "target_id": 275,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 675,
            "origin_id": 392,
            "origin_slot": 0,
            "target_id": 272,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 676,
            "origin_id": 392,
            "origin_slot": 0,
            "target_id": 136,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 677,
            "origin_id": 384,
            "origin_slot": 0,
            "target_id": 314,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 678,
            "origin_id": 385,
            "origin_slot": 0,
            "target_id": 315,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 679,
            "origin_id": 384,
            "origin_slot": 0,
            "target_id": 392,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 680,
            "origin_id": 385,
            "origin_slot": 0,
            "target_id": 393,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 756,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 417,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 757,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 418,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 758,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 419,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 759,
            "origin_id": 420,
            "origin_slot": 0,
            "target_id": 194,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 760,
            "origin_id": 355,
            "origin_slot": 0,
            "target_id": 194,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 761,
            "origin_id": 420,
            "origin_slot": 0,
            "target_id": 193,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 762,
            "origin_id": 193,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 763,
            "origin_id": 194,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 764,
            "origin_id": -10,
            "origin_slot": 4,
            "target_id": 352,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 765,
            "origin_id": -10,
            "origin_slot": 5,
            "target_id": 353,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 778,
            "origin_id": 195,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 779,
            "origin_id": 421,
            "origin_slot": 0,
            "target_id": 135,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 780,
            "origin_id": 422,
            "origin_slot": 0,
            "target_id": 169,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 781,
            "origin_id": 421,
            "origin_slot": 0,
            "target_id": 384,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 782,
            "origin_id": 422,
            "origin_slot": 0,
            "target_id": 385,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 783,
            "origin_id": 414,
            "origin_slot": 0,
            "target_id": 195,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 795,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 416,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 806,
            "origin_id": 426,
            "origin_slot": 0,
            "target_id": 324,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 807,
            "origin_id": 427,
            "origin_slot": 0,
            "target_id": 390,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 808,
            "origin_id": 428,
            "origin_slot": 0,
            "target_id": 387,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 809,
            "origin_id": 429,
            "origin_slot": 0,
            "target_id": 213,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 810,
            "origin_id": -10,
            "origin_slot": 12,
            "target_id": 429,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 811,
            "origin_id": -10,
            "origin_slot": 13,
            "target_id": 428,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 812,
            "origin_id": -10,
            "origin_slot": 14,
            "target_id": 427,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 813,
            "origin_id": -10,
            "origin_slot": 15,
            "target_id": 426,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 814,
            "origin_id": 430,
            "origin_slot": 0,
            "target_id": 239,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 815,
            "origin_id": 431,
            "origin_slot": 0,
            "target_id": 289,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 816,
            "origin_id": 432,
            "origin_slot": 0,
            "target_id": 288,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 817,
            "origin_id": 433,
            "origin_slot": 0,
            "target_id": 287,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 818,
            "origin_id": -10,
            "origin_slot": 8,
            "target_id": 433,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 819,
            "origin_id": -10,
            "origin_slot": 9,
            "target_id": 432,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 820,
            "origin_id": -10,
            "origin_slot": 10,
            "target_id": 431,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 821,
            "origin_id": -10,
            "origin_slot": 11,
            "target_id": 430,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 822,
            "origin_id": 434,
            "origin_slot": 0,
            "target_id": 351,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 823,
            "origin_id": -10,
            "origin_slot": 7,
            "target_id": 434,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 824,
            "origin_id": 435,
            "origin_slot": 0,
            "target_id": 350,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 825,
            "origin_id": -10,
            "origin_slot": 6,
            "target_id": 435,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 829,
            "origin_id": 340,
            "origin_slot": 2,
            "target_id": 436,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 830,
            "origin_id": 436,
            "origin_slot": 0,
            "target_id": 437,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 831,
            "origin_id": 437,
            "origin_slot": 0,
            "target_id": 345,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 832,
            "origin_id": 340,
            "origin_slot": 0,
            "target_id": 436,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 833,
            "origin_id": 340,
            "origin_slot": 1,
            "target_id": 436,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 834,
            "origin_id": 340,
            "origin_slot": 0,
            "target_id": 437,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 835,
            "origin_id": 340,
            "origin_slot": 1,
            "target_id": 437,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 836,
            "origin_id": 240,
            "origin_slot": 0,
            "target_id": 436,
            "target_slot": 4,
            "type": "INT"
          },
          {
            "id": 837,
            "origin_id": 240,
            "origin_slot": 0,
            "target_id": 437,
            "target_slot": 4,
            "type": "INT"
          },
          {
            "id": 842,
            "origin_id": 326,
            "origin_slot": 0,
            "target_id": 439,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 843,
            "origin_id": 205,
            "origin_slot": 0,
            "target_id": 437,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 844,
            "origin_id": 322,
            "origin_slot": 0,
            "target_id": 438,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 845,
            "origin_id": 438,
            "origin_slot": 0,
            "target_id": 202,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 846,
            "origin_id": 439,
            "origin_slot": 0,
            "target_id": 203,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 847,
            "origin_id": 204,
            "origin_slot": 0,
            "target_id": 436,
            "target_slot": 0,
            "type": "MODEL"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "5b803fdb-e065-4df0-9485-4b7bd5a4879e",
        "version": 1,
        "state": {
          "lastGroupId": 9,
          "lastNodeId": 496,
          "lastLinkId": 703,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Cross Fade Contexts",
        "inputNode": {
          "id": -10,
          "bounding": [
            -4180,
            4670,
            127.4000015258789,
            100
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            -2410,
            4680,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "2bcc38f3-9bda-4ab1-93e0-cfd02b184cc8",
            "name": "images",
            "type": "IMAGE",
            "linkIds": [
              633,
              632
            ],
            "localized_name": "images",
            "label": "control_video",
            "shape": 7,
            "pos": [
              -4072.599998474121,
              4690
            ]
          },
          {
            "id": "2474e331-fab5-43fd-b2bb-b2009879279b",
            "name": "num_frames",
            "type": "INT",
            "linkIds": [
              692
            ],
            "localized_name": "num_frames",
            "label": "context_frames",
            "pos": [
              -4072.599998474121,
              4710
            ]
          },
          {
            "id": "2cf468b9-55c0-43c3-a0bd-8f2b40de0889",
            "name": "images_1",
            "type": "IMAGE",
            "linkIds": [
              636,
              637,
              678,
              680
            ],
            "localized_name": "images_1",
            "label": "vace_output",
            "shape": 7,
            "pos": [
              -4072.599998474121,
              4730
            ]
          }
        ],
        "outputs": [
          {
            "id": "c6dd0d3e-1b64-4535-8faa-e22b8af78e5c",
            "name": "images",
            "type": "IMAGE",
            "linkIds": [
              683
            ],
            "label": "vace_final",
            "pos": [
              -2390,
              4700
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 463,
            "type": "GetImageRangeFromBatch",
            "pos": [
              -3360,
              4990
            ],
            "size": [
              210,
              102
            ],
            "flags": {},
            "order": 3,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": 637
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "num_frames",
                "name": "num_frames",
                "type": "INT",
                "widget": {
                  "name": "num_frames"
                },
                "link": 697
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  645
                ]
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "title": "Get context2 vace",
            "properties": {
              "Node name for S&R": "GetImageRangeFromBatch",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              -1,
              1
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 460,
            "type": "GetImageRangeFromBatch",
            "pos": [
              -3360,
              4850
            ],
            "size": [
              210,
              102
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": 633
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "num_frames",
                "name": "num_frames",
                "type": "INT",
                "widget": {
                  "name": "num_frames"
                },
                "link": 696
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  644
                ]
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "title": "Get context2 original",
            "properties": {
              "Node name for S&R": "GetImageRangeFromBatch",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              -1,
              1
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 495,
            "type": "SetNode",
            "pos": [
              -3580,
              4710
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 11,
            "mode": 0,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 692
              }
            ],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  693,
                  694,
                  695,
                  696,
                  697,
                  698,
                  699,
                  700
                ]
              }
            ],
            "title": "Set_context_frames",
            "properties": {
              "previousName": "context_frames"
            },
            "widgets_values": [
              "context_frames"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 483,
            "type": "Basic data handling: CastToInt",
            "pos": [
              -3230,
              4800
            ],
            "size": [
              140,
              30
            ],
            "flags": {
              "collapsed": true
            },
            "order": 9,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "input",
                "name": "input",
                "type": "*",
                "link": 666
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  667
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "Basic data handling: CastToInt",
              "cnr_id": "basic_data_handling",
              "ver": "1.0.0"
            },
            "widgets_values": []
          },
          {
            "id": 458,
            "type": "GetImageRangeFromBatch",
            "pos": [
              -3360,
              4390
            ],
            "size": [
              210,
              102
            ],
            "flags": {},
            "order": 0,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": 632
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "num_frames",
                "name": "num_frames",
                "type": "INT",
                "widget": {
                  "name": "num_frames"
                },
                "link": 693
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  642
                ]
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "title": "Get context1 original",
            "properties": {
              "Node name for S&R": "GetImageRangeFromBatch",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              0,
              1
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 464,
            "type": "GetImageRangeFromBatch",
            "pos": [
              -3360,
              4530
            ],
            "size": [
              210,
              102
            ],
            "flags": {},
            "order": 4,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": 636
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "num_frames",
                "name": "num_frames",
                "type": "INT",
                "widget": {
                  "name": "num_frames"
                },
                "link": 694
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  641
                ]
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "title": "Get context1 vace",
            "properties": {
              "Node name for S&R": "GetImageRangeFromBatch",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              0,
              1
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 482,
            "type": "VHS_GetImageCount",
            "pos": [
              -3650,
              4800
            ],
            "size": [
              225.86666870117188,
              26
            ],
            "flags": {
              "collapsed": true
            },
            "order": 8,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 680
              }
            ],
            "outputs": [
              {
                "localized_name": "count",
                "name": "count",
                "type": "INT",
                "links": [
                  663
                ]
              }
            ],
            "title": "VACE frame count",
            "properties": {
              "Node name for S&R": "VHS_GetImageCount",
              "cnr_id": "comfyui-videohelpersuite",
              "ver": "537f3a02269e14ab4b0350d4189a52034e9a3b12"
            },
            "widgets_values": {}
          },
          {
            "id": 480,
            "type": "Basic data handling: MathFormula",
            "pos": [
              -3410,
              4800
            ],
            "size": [
              210,
              98
            ],
            "flags": {
              "collapsed": true
            },
            "order": 7,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "FLOAT,INT",
                "link": 663
              },
              {
                "name": "b",
                "shape": 7,
                "type": "FLOAT,INT",
                "link": 700
              },
              {
                "name": "c",
                "shape": 7,
                "type": "FLOAT,INT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": [
                  666
                ]
              }
            ],
            "title": "vace-(context*2)",
            "properties": {
              "Node name for S&R": "Basic data handling: MathFormula",
              "cnr_id": "basic_data_handling",
              "ver": "1.0.0"
            },
            "widgets_values": [
              "a-(b*2)"
            ]
          },
          {
            "id": 484,
            "type": "ImageBatchMulti",
            "pos": [
              -2760,
              4690
            ],
            "size": [
              210,
              122
            ],
            "flags": {},
            "order": 10,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image_1",
                "name": "image_1",
                "type": "IMAGE",
                "link": 668
              },
              {
                "localized_name": "image_2",
                "name": "image_2",
                "shape": 7,
                "type": "IMAGE",
                "link": 677
              },
              {
                "name": "image_3",
                "shape": 7,
                "type": "IMAGE",
                "link": 670
              }
            ],
            "outputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "links": [
                  683
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3",
              "Node name for S&R": "ImageBatchMulti"
            },
            "widgets_values": [
              3,
              null
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 462,
            "type": "CrossFadeImages",
            "pos": [
              -3120,
              4420
            ],
            "size": [
              250,
              180
            ],
            "flags": {},
            "order": 2,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images_1",
                "name": "images_1",
                "type": "IMAGE",
                "link": 642
              },
              {
                "localized_name": "images_2",
                "name": "images_2",
                "type": "IMAGE",
                "link": 641
              },
              {
                "localized_name": "transitioning_frames",
                "name": "transitioning_frames",
                "type": "INT",
                "widget": {
                  "name": "transitioning_frames"
                },
                "link": 695
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  668
                ]
              }
            ],
            "title": "Cross Fade: video1 -> VACE",
            "properties": {
              "Node name for S&R": "CrossFadeImages",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              "ease_in",
              0,
              1,
              0,
              1
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 475,
            "type": "GetImageRangeFromBatch",
            "pos": [
              -3110,
              4710
            ],
            "size": [
              210,
              102
            ],
            "flags": {},
            "order": 6,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": 678
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "start_index",
                "name": "start_index",
                "type": "INT",
                "widget": {
                  "name": "start_index"
                },
                "link": 699
              },
              {
                "localized_name": "num_frames",
                "name": "num_frames",
                "type": "INT",
                "widget": {
                  "name": "num_frames"
                },
                "link": 667
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  677
                ]
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "title": "Get VACE frames",
            "properties": {
              "Node name for S&R": "GetImageRangeFromBatch",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              1,
              1
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 466,
            "type": "CrossFadeImages",
            "pos": [
              -3120,
              4880
            ],
            "size": [
              250,
              180
            ],
            "flags": {},
            "order": 5,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images_1",
                "name": "images_1",
                "type": "IMAGE",
                "link": 645
              },
              {
                "localized_name": "images_2",
                "name": "images_2",
                "type": "IMAGE",
                "link": 644
              },
              {
                "localized_name": "transitioning_frames",
                "name": "transitioning_frames",
                "type": "INT",
                "widget": {
                  "name": "transitioning_frames"
                },
                "link": 698
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  670
                ]
              }
            ],
            "title": "Cross Fade: VACE -> video2",
            "properties": {
              "Node name for S&R": "CrossFadeImages",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              "ease_in",
              0,
              1,
              0,
              1
            ],
            "color": "#232",
            "bgcolor": "#353"
          }
        ],
        "groups": [],
        "links": [
          {
            "id": 667,
            "origin_id": 483,
            "origin_slot": 0,
            "target_id": 475,
            "target_slot": 3,
            "type": "INT"
          },
          {
            "id": 663,
            "origin_id": 482,
            "origin_slot": 0,
            "target_id": 480,
            "target_slot": 0,
            "type": "FLOAT,INT"
          },
          {
            "id": 666,
            "origin_id": 480,
            "origin_slot": 0,
            "target_id": 483,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 668,
            "origin_id": 462,
            "origin_slot": 0,
            "target_id": 484,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 677,
            "origin_id": 475,
            "origin_slot": 0,
            "target_id": 484,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 670,
            "origin_id": 466,
            "origin_slot": 0,
            "target_id": 484,
            "target_slot": 2,
            "type": "IMAGE"
          },
          {
            "id": 642,
            "origin_id": 458,
            "origin_slot": 0,
            "target_id": 462,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 641,
            "origin_id": 464,
            "origin_slot": 0,
            "target_id": 462,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 645,
            "origin_id": 463,
            "origin_slot": 0,
            "target_id": 466,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 644,
            "origin_id": 460,
            "origin_slot": 0,
            "target_id": 466,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 633,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 460,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 632,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 458,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 636,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 464,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 637,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 463,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 678,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 475,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 680,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 482,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 683,
            "origin_id": 484,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 692,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 495,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 693,
            "origin_id": 495,
            "origin_slot": 0,
            "target_id": 458,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 694,
            "origin_id": 495,
            "origin_slot": 0,
            "target_id": 464,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 695,
            "origin_id": 495,
            "origin_slot": 0,
            "target_id": 462,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 696,
            "origin_id": 495,
            "origin_slot": 0,
            "target_id": 460,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 697,
            "origin_id": 495,
            "origin_slot": 0,
            "target_id": 463,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 698,
            "origin_id": 495,
            "origin_slot": 0,
            "target_id": 466,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 699,
            "origin_id": 495,
            "origin_slot": 0,
            "target_id": 475,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 700,
            "origin_id": 495,
            "origin_slot": 0,
            "target_id": 480,
            "target_slot": 1,
            "type": "FLOAT,INT"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "9b4d3e88-b5cd-42bf-8e0e-e1c1abbba7df",
        "version": 1,
        "state": {
          "lastGroupId": 13,
          "lastNodeId": 439,
          "lastLinkId": 849,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Wan 2.1 VACE - KSampler",
        "inputNode": {
          "id": -10,
          "bounding": [
            -9200,
            5860,
            179.48333740234375,
            340
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            -6080,
            6020,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "6afbdfc8-3ce3-42dd-9c86-5634f374d35f",
            "name": "model",
            "type": "MODEL",
            "linkIds": [
              795
            ],
            "label": "model",
            "pos": [
              -9040.516662597656,
              5880
            ]
          },
          {
            "id": "b1c3ca93-333e-4bab-be60-a07fd6a536b7",
            "name": "clip",
            "type": "CLIP",
            "linkIds": [
              757
            ],
            "pos": [
              -9040.516662597656,
              5900
            ]
          },
          {
            "id": "f6ccf709-cfae-45df-9f9f-3be906d69867",
            "name": "vae",
            "type": "VAE",
            "linkIds": [
              758
            ],
            "pos": [
              -9040.516662597656,
              5920
            ]
          },
          {
            "id": "c170d853-b3dd-4cd2-9a6a-3b7fefc24ef9",
            "name": "IMAGE",
            "type": "IMAGE",
            "linkIds": [
              764
            ],
            "label": "control_video",
            "pos": [
              -9040.516662597656,
              5940
            ]
          },
          {
            "id": "d4203248-08d4-4b11-9b3d-a325eb7fd592",
            "name": "MASK",
            "type": "MASK",
            "linkIds": [
              765
            ],
            "label": "control_mask",
            "pos": [
              -9040.516662597656,
              5960
            ]
          },
          {
            "id": "30543da1-9a16-46c2-9de4-fc7de2843387",
            "name": "value",
            "type": "STRING",
            "linkIds": [
              825
            ],
            "label": "positive_prompt",
            "pos": [
              -9040.516662597656,
              5980
            ]
          },
          {
            "id": "9eaa30f2-02e1-4af7-91a0-05e29bce569e",
            "name": "value_1",
            "type": "STRING",
            "linkIds": [
              823
            ],
            "label": "negative_prompt",
            "pos": [
              -9040.516662597656,
              6000
            ]
          },
          {
            "id": "cc40d5bb-edba-4325-9e8d-49e410849d51",
            "name": "value_2",
            "type": "INT",
            "linkIds": [
              818
            ],
            "label": "width",
            "pos": [
              -9040.516662597656,
              6020
            ]
          },
          {
            "id": "4996ab77-c683-45e9-b95f-71cd01d001ca",
            "name": "value_3",
            "type": "INT",
            "linkIds": [
              819
            ],
            "label": "height",
            "pos": [
              -9040.516662597656,
              6040
            ]
          },
          {
            "id": "31768b8f-63d4-45d9-9109-ffc5494dc41d",
            "name": "value_4",
            "type": "INT",
            "linkIds": [
              820
            ],
            "label": "length",
            "pos": [
              -9040.516662597656,
              6060
            ]
          },
          {
            "id": "345b901a-54f1-4fe6-a752-d8eb6e92709e",
            "name": "value_7",
            "type": "INT",
            "linkIds": [
              821
            ],
            "label": "seed",
            "pos": [
              -9040.516662597656,
              6080
            ]
          },
          {
            "id": "6f7b459d-8613-4603-9366-fa5a5a668c8e",
            "name": "value_8",
            "type": "BOOLEAN",
            "linkIds": [
              810
            ],
            "label": "‚û°Ô∏èenable_torch_compile",
            "pos": [
              -9040.516662597656,
              6100
            ]
          },
          {
            "id": "b29cf1f4-1670-4d97-a09e-c2ceac6f5ca4",
            "name": "value_9",
            "type": "BOOLEAN",
            "linkIds": [
              811
            ],
            "label": "‚û°Ô∏èsage_attention",
            "pos": [
              -9040.516662597656,
              6120
            ]
          },
          {
            "id": "7b7b01df-24ff-4366-a97e-d30f174f003d",
            "name": "value_10",
            "type": "BOOLEAN",
            "linkIds": [
              812
            ],
            "label": "‚û°Ô∏ènag",
            "pos": [
              -9040.516662597656,
              6140
            ]
          },
          {
            "id": "ea161c8c-4445-460d-9424-a5c679f8eb65",
            "name": "value_11",
            "type": "BOOLEAN",
            "linkIds": [
              813
            ],
            "label": "‚û°Ô∏èlightx2v",
            "pos": [
              -9040.516662597656,
              6160
            ]
          }
        ],
        "outputs": [
          {
            "id": "a6f2c77a-9ed4-4669-b862-29593d637bee",
            "name": "IMAGE",
            "type": "IMAGE",
            "linkIds": [
              778
            ],
            "label": "image",
            "pos": [
              -6060,
              6040
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 216,
            "type": "GetNode",
            "pos": [
              -6960,
              5750
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 0,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  408
                ]
              }
            ],
            "title": "Get_torch_compile",
            "properties": {},
            "widgets_values": [
              "torch_compile"
            ]
          },
          {
            "id": 298,
            "type": "GetNode",
            "pos": [
              -7910,
              6250
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 1,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  548
                ]
              }
            ],
            "title": "Get_height",
            "properties": {},
            "widgets_values": [
              "height"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 299,
            "type": "GetNode",
            "pos": [
              -7910,
              6290
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 2,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  549
                ]
              }
            ],
            "title": "Get_length",
            "properties": {},
            "widgets_values": [
              "length"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 136,
            "type": "TorchCompileModelWanVideoV2",
            "pos": [
              -7330,
              5590
            ],
            "size": [
              350,
              202
            ],
            "flags": {},
            "order": 30,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 676
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  237,
                  409
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "TorchCompileModelWanVideoV2",
              "cnr_id": "comfyui-kjnodes",
              "ver": "36f6fdd7d4c393675ac622bd300ef667ee65d8b8"
            },
            "widgets_values": [
              "inductor",
              false,
              "default",
              false,
              true,
              64,
              true
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 325,
            "type": "GetNode",
            "pos": [
              -6290,
              5750
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 3,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  508
                ]
              }
            ],
            "title": "Get_lightx2v",
            "properties": {},
            "widgets_values": [
              "lightx2v"
            ]
          },
          {
            "id": 297,
            "type": "GetNode",
            "pos": [
              -7910,
              6210
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 4,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  547
                ]
              }
            ],
            "title": "Get_width",
            "properties": {},
            "widgets_values": [
              "width"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 239,
            "type": "SetNode",
            "pos": [
              -8590,
              6270
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 38,
            "mode": 4,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 814
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_seed",
            "properties": {
              "previousName": "seed"
            },
            "widgets_values": [
              "seed"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 289,
            "type": "SetNode",
            "pos": [
              -8590,
              6230
            ],
            "size": [
              210,
              50
            ],
            "flags": {
              "collapsed": true
            },
            "order": 41,
            "mode": 4,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 815
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_length",
            "properties": {
              "previousName": "length"
            },
            "widgets_values": [
              "length"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 288,
            "type": "SetNode",
            "pos": [
              -8590,
              6190
            ],
            "size": [
              210,
              50
            ],
            "flags": {
              "collapsed": true
            },
            "order": 40,
            "mode": 4,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 816
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_height",
            "properties": {
              "previousName": "height"
            },
            "widgets_values": [
              "height"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 213,
            "type": "SetNode",
            "pos": [
              -8590,
              6310
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 37,
            "mode": 4,
            "inputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "link": 809
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_torch_compile",
            "properties": {
              "previousName": "torch_compile"
            },
            "widgets_values": [
              "torch_compile"
            ]
          },
          {
            "id": 369,
            "type": "SetNode",
            "pos": [
              -7250,
              6070
            ],
            "size": [
              223.5,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 24,
            "mode": 4,
            "inputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "link": 618
              }
            ],
            "outputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  844
                ]
              }
            ],
            "title": "Set_negative",
            "properties": {
              "previousName": "negative"
            },
            "widgets_values": [
              "negative"
            ],
            "color": "#332922",
            "bgcolor": "#593930"
          },
          {
            "id": 322,
            "type": "Basic data handling: IfElse",
            "pos": [
              -6300,
              5610
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 34,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 649
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 666
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 508
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  848
                ]
              }
            ],
            "title": "lightx2v?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 387,
            "type": "SetNode",
            "pos": [
              -8590,
              6350
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 47,
            "mode": 4,
            "inputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "link": 808
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_sage_attention",
            "properties": {
              "previousName": "sage_attention"
            },
            "widgets_values": [
              "sage_attention"
            ]
          },
          {
            "id": 390,
            "type": "SetNode",
            "pos": [
              -8590,
              6390
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 48,
            "mode": 4,
            "inputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "link": 807
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_nag",
            "properties": {
              "previousName": "nag"
            },
            "widgets_values": [
              "nag"
            ]
          },
          {
            "id": 272,
            "type": "Basic data handling: IfElse",
            "pos": [
              -6950,
              5590
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 32,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 409
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 675
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 408
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  665,
                  666
                ]
              }
            ],
            "title": "compile?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 391,
            "type": "GetNode",
            "pos": [
              -7750,
              5780
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 5,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  670
                ]
              }
            ],
            "title": "Get_nag",
            "properties": {},
            "widgets_values": [
              "nag"
            ]
          },
          {
            "id": 316,
            "type": "GetNode",
            "pos": [
              -8000,
              5770
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 6,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  490
                ]
              }
            ],
            "title": "Get_negative",
            "properties": {},
            "widgets_values": [
              "negative"
            ],
            "color": "#332922",
            "bgcolor": "#593930"
          },
          {
            "id": 392,
            "type": "Basic data handling: IfElse",
            "pos": [
              -7620,
              5580
            ],
            "size": [
              210,
              78
            ],
            "flags": {
              "collapsed": false
            },
            "order": 28,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 671
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 679
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 670
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  675,
                  676
                ]
              }
            ],
            "title": "NAG?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "0.7.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 324,
            "type": "SetNode",
            "pos": [
              -8590,
              6430
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 42,
            "mode": 4,
            "inputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "link": 806
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_lightx2v",
            "properties": {
              "previousName": "lightx2v"
            },
            "widgets_values": [
              "lightx2v"
            ]
          },
          {
            "id": 356,
            "type": "GetNode",
            "pos": [
              -8110,
              5990
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 7,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "STRING",
                "type": "STRING",
                "links": [
                  587
                ]
              }
            ],
            "title": "Get_positive_prompt",
            "properties": {},
            "widgets_values": [
              "positive_prompt"
            ]
          },
          {
            "id": 355,
            "type": "GetNode",
            "pos": [
              -8110,
              6070
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 8,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "STRING",
                "type": "STRING",
                "links": [
                  760
                ]
              }
            ],
            "title": "Get_negative_prompt",
            "properties": {},
            "widgets_values": [
              "negative_prompt"
            ]
          },
          {
            "id": 420,
            "type": "GetNode",
            "pos": [
              -8110,
              6030
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 9,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  759,
                  761
                ]
              }
            ],
            "title": "Get_clip",
            "properties": {},
            "widgets_values": [
              "clip"
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 193,
            "type": "CLIPTextEncode",
            "pos": [
              -7910,
              6010
            ],
            "size": [
              250,
              90
            ],
            "flags": {
              "collapsed": true
            },
            "order": 20,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 761
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 587
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  762
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "CLIPTextEncode",
              "cnr_id": "comfy-core",
              "ver": "0.3.45",
              "widget_ue_connectable": {}
            },
            "widgets_values": [
              ""
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 197,
            "type": "GetNode",
            "pos": [
              -7910,
              6090
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 10,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "VAE",
                "type": "VAE",
                "links": [
                  546
                ]
              }
            ],
            "title": "Get_vae",
            "properties": {},
            "widgets_values": [
              "vae"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 194,
            "type": "CLIPTextEncode",
            "pos": [
              -7910,
              6050
            ],
            "size": [
              281.4833282470703,
              88
            ],
            "flags": {
              "collapsed": true
            },
            "order": 19,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 759
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 760
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "slot_index": 0,
                "links": [
                  763
                ]
              }
            ],
            "title": "CLIP Text Encode (Negative Prompt)",
            "properties": {
              "Node name for S&R": "CLIPTextEncode",
              "cnr_id": "comfy-core",
              "ver": "0.3.34",
              "widget_ue_connectable": {}
            },
            "widgets_values": [
              ""
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 358,
            "type": "GetNode",
            "pos": [
              -7910,
              6170
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 11,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "links": [
                  589
                ]
              }
            ],
            "title": "Get_control_mask",
            "properties": {},
            "widgets_values": [
              "control_mask"
            ],
            "color": "#1c5715",
            "bgcolor": "#1f401b"
          },
          {
            "id": 384,
            "type": "Basic data handling: IfElse",
            "pos": [
              -8280,
              5620
            ],
            "size": [
              210,
              78
            ],
            "flags": {},
            "order": 23,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "if_true",
                "name": "if_true",
                "type": "*",
                "link": 658
              },
              {
                "localized_name": "if_false",
                "name": "if_false",
                "type": "*",
                "link": 781
              },
              {
                "localized_name": "condition",
                "name": "condition",
                "type": "BOOLEAN",
                "widget": {
                  "name": "condition"
                },
                "link": 661
              }
            ],
            "outputs": [
              {
                "localized_name": "result",
                "name": "result",
                "type": "*",
                "links": [
                  677,
                  679
                ]
              }
            ],
            "title": "sage attention?",
            "properties": {
              "Node name for S&R": "Basic data handling: IfElse",
              "cnr_id": "basic_data_handling",
              "ver": "1.0.0"
            },
            "widgets_values": [
              false
            ],
            "color": "#432",
            "bgcolor": "#653"
          },
          {
            "id": 357,
            "type": "GetNode",
            "pos": [
              -7910,
              6130
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 12,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  588
                ]
              }
            ],
            "title": "Get_control_video",
            "properties": {},
            "widgets_values": [
              "control_video"
            ],
            "color": "#2a363b",
            "bgcolor": "#3f5159"
          },
          {
            "id": 414,
            "type": "GetNode",
            "pos": [
              -6460,
              6080
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 13,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "VAE",
                "type": "VAE",
                "links": [
                  783
                ]
              }
            ],
            "title": "Get_vae",
            "properties": {},
            "widgets_values": [
              "vae"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 195,
            "type": "VAEDecode",
            "pos": [
              -6280,
              6030
            ],
            "size": [
              140,
              46
            ],
            "flags": {
              "collapsed": false
            },
            "order": 31,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 572
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 783
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  284,
                  778
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "VAEDecode",
              "cnr_id": "comfy-core",
              "ver": "0.3.73"
            },
            "widgets_values": [],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 314,
            "type": "WanVideoNAG",
            "pos": [
              -7850,
              5580
            ],
            "size": [
              210,
              150
            ],
            "flags": {},
            "order": 26,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 677
              },
              {
                "localized_name": "conditioning",
                "name": "conditioning",
                "type": "CONDITIONING",
                "link": 490
              }
            ],
            "outputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "links": [
                  671
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "WanVideoNAG",
              "cnr_id": "comfyui-kjnodes",
              "ver": "acdd16a973460b5be5d92133a9217787f0e085c6"
            },
            "widgets_values": [
              11,
              0.25,
              2.5,
              "default"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 287,
            "type": "SetNode",
            "pos": [
              -8590,
              6150
            ],
            "size": [
              210,
              50
            ],
            "flags": {
              "collapsed": true
            },
            "order": 39,
            "mode": 4,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 817
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_width",
            "properties": {
              "previousName": "width"
            },
            "widgets_values": [
              "width"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 429,
            "type": "PrimitiveBoolean",
            "pos": [
              -8730,
              6310
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 55,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "BOOLEAN",
                "widget": {
                  "name": "value"
                },
                "link": 810
              }
            ],
            "outputs": [
              {
                "localized_name": "BOOLEAN",
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  809
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveBoolean",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              false
            ]
          },
          {
            "id": 428,
            "type": "PrimitiveBoolean",
            "pos": [
              -8730,
              6350
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 54,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "BOOLEAN",
                "widget": {
                  "name": "value"
                },
                "link": 811
              }
            ],
            "outputs": [
              {
                "localized_name": "BOOLEAN",
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  808
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveBoolean",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 427,
            "type": "PrimitiveBoolean",
            "pos": [
              -8730,
              6390
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 53,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "BOOLEAN",
                "widget": {
                  "name": "value"
                },
                "link": 812
              }
            ],
            "outputs": [
              {
                "localized_name": "BOOLEAN",
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  807
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveBoolean",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 426,
            "type": "PrimitiveBoolean",
            "pos": [
              -8730,
              6430
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 52,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "BOOLEAN",
                "widget": {
                  "name": "value"
                },
                "link": 813
              }
            ],
            "outputs": [
              {
                "localized_name": "BOOLEAN",
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  806
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveBoolean",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 433,
            "type": "PrimitiveInt",
            "pos": [
              -8700,
              6150
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 59,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 818
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  817
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveInt",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              0,
              "fixed"
            ]
          },
          {
            "id": 432,
            "type": "PrimitiveInt",
            "pos": [
              -8700,
              6190
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 58,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 819
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  816
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveInt",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              0,
              "fixed"
            ]
          },
          {
            "id": 431,
            "type": "PrimitiveInt",
            "pos": [
              -8700,
              6230
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 57,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 820
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  815
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveInt",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              0,
              "fixed"
            ]
          },
          {
            "id": 435,
            "type": "PrimitiveString",
            "pos": [
              -8720,
              6070
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 61,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "STRING",
                "widget": {
                  "name": "value"
                },
                "link": 825
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  824
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveString",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 434,
            "type": "PrimitiveString",
            "pos": [
              -8720,
              6110
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 60,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "STRING",
                "widget": {
                  "name": "value"
                },
                "link": 823
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  822
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveString",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 419,
            "type": "SetNode",
            "pos": [
              -8590,
              5950
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 51,
            "mode": 4,
            "inputs": [
              {
                "name": "VAE",
                "type": "VAE",
                "link": 758
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_vae",
            "properties": {
              "previousName": "vae"
            },
            "widgets_values": [
              "vae"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 352,
            "type": "SetNode",
            "pos": [
              -8590,
              5990
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 45,
            "mode": 4,
            "inputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "link": 764
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_control_video",
            "properties": {
              "previousName": "control_video"
            },
            "widgets_values": [
              "control_video"
            ],
            "color": "#2a363b",
            "bgcolor": "#3f5159"
          },
          {
            "id": 430,
            "type": "PrimitiveInt",
            "pos": [
              -8700,
              6270
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 56,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 821
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  814
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PrimitiveInt",
              "cnr_id": "comfy-core",
              "ver": "0.3.77"
            },
            "widgets_values": [
              0,
              "fixed"
            ]
          },
          {
            "id": 350,
            "type": "SetNode",
            "pos": [
              -8590,
              6070
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 43,
            "mode": 4,
            "inputs": [
              {
                "name": "STRING",
                "type": "STRING",
                "link": 824
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_positive_prompt",
            "properties": {
              "previousName": "positive_prompt"
            },
            "widgets_values": [
              "positive_prompt"
            ]
          },
          {
            "id": 353,
            "type": "SetNode",
            "pos": [
              -8590,
              6030
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 46,
            "mode": 4,
            "inputs": [
              {
                "name": "MASK",
                "type": "MASK",
                "link": 765
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_control_mask",
            "properties": {
              "previousName": "control_mask"
            },
            "widgets_values": [
              "control_mask"
            ],
            "color": "#1c5715",
            "bgcolor": "#1f401b"
          },
          {
            "id": 351,
            "type": "SetNode",
            "pos": [
              -8590,
              6110
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 44,
            "mode": 4,
            "inputs": [
              {
                "name": "STRING",
                "type": "STRING",
                "link": 822
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_negative_prompt",
            "properties": {
              "previousName": "negative_prompt"
            },
            "widgets_values": [
              "negative_prompt"
            ]
          },
          {
            "id": 347,
            "type": "GetNode",
            "pos": [
              -6620,
              6080
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 14,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  569
                ]
              }
            ],
            "title": "Get_trim_latent",
            "properties": {},
            "widgets_values": [
              "trim_latent"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 135,
            "type": "PathchSageAttentionKJ",
            "pos": [
              -8560,
              5620
            ],
            "size": [
              260,
              82
            ],
            "flags": {},
            "order": 21,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 779
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  658
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "PathchSageAttentionKJ",
              "cnr_id": "comfyui-kjnodes",
              "ver": "36f6fdd7d4c393675ac622bd300ef667ee65d8b8"
            },
            "widgets_values": [
              "sageattn_qk_int8_pv_fp8_cuda++",
              false
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 388,
            "type": "GetNode",
            "pos": [
              -8470,
              5750
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 15,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "BOOLEAN",
                "type": "BOOLEAN",
                "links": [
                  661
                ]
              }
            ],
            "title": "Get_sage_attention",
            "properties": {},
            "widgets_values": [
              "sage_attention"
            ]
          },
          {
            "id": 421,
            "type": "GetNode",
            "pos": [
              -8780,
              5660
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 16,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  779,
                  781
                ]
              }
            ],
            "title": "Get_model",
            "properties": {},
            "widgets_values": [
              "model"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 416,
            "type": "SetNode",
            "pos": [
              -8590,
              5870
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 49,
            "mode": 4,
            "inputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "link": 795
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_model",
            "properties": {
              "previousName": "model"
            },
            "widgets_values": [
              "model"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 346,
            "type": "SetNode",
            "pos": [
              -7300,
              6110
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 25,
            "mode": 4,
            "inputs": [
              {
                "name": "INT",
                "type": "INT",
                "link": 568
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_trim_latent",
            "properties": {
              "previousName": "trim_latent"
            },
            "widgets_values": [
              "trim_latent"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 438,
            "type": "KSampler",
            "pos": [
              -6930,
              6000
            ],
            "size": [
              280,
              422.25
            ],
            "flags": {},
            "order": 27,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 842
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 843
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 844
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 845
              },
              {
                "localized_name": "seed",
                "name": "seed",
                "type": "INT",
                "widget": {
                  "name": "seed"
                },
                "link": 846
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  847
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "KSampler",
              "cnr_id": "comfy-core",
              "ver": "0.4.0"
            },
            "widgets_values": [
              0,
              "fixed",
              4,
              1,
              "euler",
              "simple",
              1
            ],
            "color": "#323",
            "bgcolor": "#535"
          },
          {
            "id": 345,
            "type": "TrimVideoLatent",
            "pos": [
              -6460,
              6030
            ],
            "size": [
              210,
              58
            ],
            "flags": {
              "collapsed": true
            },
            "order": 29,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 847
              },
              {
                "localized_name": "trim_amount",
                "name": "trim_amount",
                "type": "INT",
                "widget": {
                  "name": "trim_amount"
                },
                "link": 569
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  572
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "TrimVideoLatent",
              "cnr_id": "comfy-core",
              "ver": "0.3.75"
            },
            "widgets_values": [
              0
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 240,
            "type": "GetNode",
            "pos": [
              -7070,
              6110
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 17,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "INT",
                "type": "INT",
                "links": [
                  846
                ]
              }
            ],
            "title": "Get_seed",
            "properties": {},
            "widgets_values": [
              "seed"
            ],
            "color": "#1b4669",
            "bgcolor": "#29699c"
          },
          {
            "id": 204,
            "type": "GetNode",
            "pos": [
              -7190,
              6030
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 18,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  842
                ]
              }
            ],
            "title": "Get_model_conditioned",
            "properties": {},
            "widgets_values": [
              "model_conditioned"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 202,
            "type": "SetNode",
            "pos": [
              -5780,
              5640
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 36,
            "mode": 4,
            "inputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "link": 849
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_model_conditioned",
            "properties": {
              "previousName": "model_conditioned"
            },
            "widgets_values": [
              "model_conditioned"
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 439,
            "type": "ModelSamplingSD3",
            "pos": [
              -6040,
              5610
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 35,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 848
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  849
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ModelSamplingSD3",
              "cnr_id": "comfy-core",
              "ver": "0.4.0"
            },
            "widgets_values": [
              5
            ],
            "color": "#223",
            "bgcolor": "#335"
          },
          {
            "id": 319,
            "type": "LoraLoaderModelOnly",
            "pos": [
              -6660,
              5610
            ],
            "size": [
              330,
              90
            ],
            "flags": {},
            "order": 33,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 665
              },
              {
                "label": "lora_high",
                "localized_name": "lora_name",
                "name": "lora_name",
                "type": "COMBO",
                "widget": {
                  "name": "lora_name"
                },
                "link": null
              },
              {
                "label": "lora_high_strength",
                "localized_name": "strength_model",
                "name": "strength_model",
                "type": "FLOAT",
                "widget": {
                  "name": "strength_model"
                },
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  649
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "LoraLoaderModelOnly",
              "cnr_id": "comfy-core",
              "ver": "0.3.73"
            },
            "widgets_values": [
              "Wan 2.1\\T2V\\lightx2v_T2V_14B_cfg_step_distill_v2_lora_rank64_bf16.safetensors",
              0.7
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 340,
            "type": "WanVaceToVideo",
            "pos": [
              -7600,
              6020
            ],
            "size": [
              270,
              260
            ],
            "flags": {},
            "order": 22,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 762
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 763
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 546
              },
              {
                "localized_name": "control_video",
                "name": "control_video",
                "shape": 7,
                "type": "IMAGE",
                "link": 588
              },
              {
                "localized_name": "control_masks",
                "name": "control_masks",
                "shape": 7,
                "type": "MASK",
                "link": 589
              },
              {
                "localized_name": "reference_image",
                "name": "reference_image",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 547
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 548
              },
              {
                "localized_name": "length",
                "name": "length",
                "type": "INT",
                "widget": {
                  "name": "length"
                },
                "link": 549
              }
            ],
            "outputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  843
                ]
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  618
                ]
              },
              {
                "localized_name": "latent",
                "name": "latent",
                "type": "LATENT",
                "links": [
                  845
                ]
              },
              {
                "localized_name": "trim_latent",
                "name": "trim_latent",
                "type": "INT",
                "links": [
                  568
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "WanVaceToVideo",
              "cnr_id": "comfy-core",
              "ver": "0.3.75"
            },
            "widgets_values": [
              832,
              480,
              81,
              1,
              1
            ],
            "color": "#323",
            "bgcolor": "#535"
          },
          {
            "id": 418,
            "type": "SetNode",
            "pos": [
              -8590,
              5910
            ],
            "size": [
              210,
              60
            ],
            "flags": {
              "collapsed": true
            },
            "order": 50,
            "mode": 4,
            "inputs": [
              {
                "name": "CLIP",
                "type": "CLIP",
                "link": 757
              }
            ],
            "outputs": [
              {
                "name": "*",
                "type": "*",
                "links": null
              }
            ],
            "title": "Set_clip",
            "properties": {
              "previousName": "clip"
            },
            "widgets_values": [
              "clip"
            ],
            "color": "#432",
            "bgcolor": "#653"
          }
        ],
        "groups": [
          {
            "id": 6,
            "title": "Lightx2v",
            "bounding": [
              -6680,
              5530,
              610,
              243.6
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "Torch Compile",
            "bounding": [
              -7350,
              5510,
              630,
              297.6
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 11,
            "title": "Sage Attention",
            "bounding": [
              -8580,
              5530,
              530,
              233.6
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 12,
            "title": "NAG",
            "bounding": [
              -8020,
              5500,
              630,
              303.6
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 284,
            "origin_id": 195,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 408,
            "origin_id": 216,
            "origin_slot": 0,
            "target_id": 272,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 409,
            "origin_id": 136,
            "origin_slot": 0,
            "target_id": 272,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 490,
            "origin_id": 316,
            "origin_slot": 0,
            "target_id": 314,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 508,
            "origin_id": 325,
            "origin_slot": 0,
            "target_id": 322,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 546,
            "origin_id": 197,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 2,
            "type": "VAE"
          },
          {
            "id": 547,
            "origin_id": 297,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 6,
            "type": "INT"
          },
          {
            "id": 548,
            "origin_id": 298,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 7,
            "type": "INT"
          },
          {
            "id": 549,
            "origin_id": 299,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 8,
            "type": "INT"
          },
          {
            "id": 568,
            "origin_id": 340,
            "origin_slot": 3,
            "target_id": 346,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 569,
            "origin_id": 347,
            "origin_slot": 0,
            "target_id": 345,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 572,
            "origin_id": 345,
            "origin_slot": 0,
            "target_id": 195,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 587,
            "origin_id": 356,
            "origin_slot": 0,
            "target_id": 193,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 588,
            "origin_id": 357,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 3,
            "type": "IMAGE"
          },
          {
            "id": 589,
            "origin_id": 358,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 4,
            "type": "MASK"
          },
          {
            "id": 618,
            "origin_id": 340,
            "origin_slot": 1,
            "target_id": 369,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 649,
            "origin_id": 319,
            "origin_slot": 0,
            "target_id": 322,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 658,
            "origin_id": 135,
            "origin_slot": 0,
            "target_id": 384,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 661,
            "origin_id": 388,
            "origin_slot": 0,
            "target_id": 384,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 665,
            "origin_id": 272,
            "origin_slot": 0,
            "target_id": 319,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 666,
            "origin_id": 272,
            "origin_slot": 0,
            "target_id": 322,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 670,
            "origin_id": 391,
            "origin_slot": 0,
            "target_id": 392,
            "target_slot": 2,
            "type": "BOOLEAN"
          },
          {
            "id": 671,
            "origin_id": 314,
            "origin_slot": 0,
            "target_id": 392,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 675,
            "origin_id": 392,
            "origin_slot": 0,
            "target_id": 272,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 676,
            "origin_id": 392,
            "origin_slot": 0,
            "target_id": 136,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 677,
            "origin_id": 384,
            "origin_slot": 0,
            "target_id": 314,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 679,
            "origin_id": 384,
            "origin_slot": 0,
            "target_id": 392,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 757,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 418,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 758,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 419,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 759,
            "origin_id": 420,
            "origin_slot": 0,
            "target_id": 194,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 760,
            "origin_id": 355,
            "origin_slot": 0,
            "target_id": 194,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 761,
            "origin_id": 420,
            "origin_slot": 0,
            "target_id": 193,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 762,
            "origin_id": 193,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 763,
            "origin_id": 194,
            "origin_slot": 0,
            "target_id": 340,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 764,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 352,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 765,
            "origin_id": -10,
            "origin_slot": 4,
            "target_id": 353,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 778,
            "origin_id": 195,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 779,
            "origin_id": 421,
            "origin_slot": 0,
            "target_id": 135,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 781,
            "origin_id": 421,
            "origin_slot": 0,
            "target_id": 384,
            "target_slot": 1,
            "type": "*"
          },
          {
            "id": 783,
            "origin_id": 414,
            "origin_slot": 0,
            "target_id": 195,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 795,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 416,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 806,
            "origin_id": 426,
            "origin_slot": 0,
            "target_id": 324,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 807,
            "origin_id": 427,
            "origin_slot": 0,
            "target_id": 390,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 808,
            "origin_id": 428,
            "origin_slot": 0,
            "target_id": 387,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 809,
            "origin_id": 429,
            "origin_slot": 0,
            "target_id": 213,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 810,
            "origin_id": -10,
            "origin_slot": 11,
            "target_id": 429,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 811,
            "origin_id": -10,
            "origin_slot": 12,
            "target_id": 428,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 812,
            "origin_id": -10,
            "origin_slot": 13,
            "target_id": 427,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 813,
            "origin_id": -10,
            "origin_slot": 14,
            "target_id": 426,
            "target_slot": 0,
            "type": "BOOLEAN"
          },
          {
            "id": 814,
            "origin_id": 430,
            "origin_slot": 0,
            "target_id": 239,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 815,
            "origin_id": 431,
            "origin_slot": 0,
            "target_id": 289,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 816,
            "origin_id": 432,
            "origin_slot": 0,
            "target_id": 288,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 817,
            "origin_id": 433,
            "origin_slot": 0,
            "target_id": 287,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 818,
            "origin_id": -10,
            "origin_slot": 7,
            "target_id": 433,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 819,
            "origin_id": -10,
            "origin_slot": 8,
            "target_id": 432,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 820,
            "origin_id": -10,
            "origin_slot": 9,
            "target_id": 431,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 821,
            "origin_id": -10,
            "origin_slot": 10,
            "target_id": 430,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 822,
            "origin_id": 434,
            "origin_slot": 0,
            "target_id": 351,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 823,
            "origin_id": -10,
            "origin_slot": 6,
            "target_id": 434,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 824,
            "origin_id": 435,
            "origin_slot": 0,
            "target_id": 350,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 825,
            "origin_id": -10,
            "origin_slot": 5,
            "target_id": 435,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 842,
            "origin_id": 204,
            "origin_slot": 0,
            "target_id": 438,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 843,
            "origin_id": 340,
            "origin_slot": 0,
            "target_id": 438,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 844,
            "origin_id": 369,
            "origin_slot": 0,
            "target_id": 438,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 845,
            "origin_id": 340,
            "origin_slot": 2,
            "target_id": 438,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 846,
            "origin_id": 240,
            "origin_slot": 0,
            "target_id": 438,
            "target_slot": 4,
            "type": "INT"
          },
          {
            "id": 847,
            "origin_id": 438,
            "origin_slot": 0,
            "target_id": 345,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 848,
            "origin_id": 322,
            "origin_slot": 0,
            "target_id": 439,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 849,
            "origin_id": 439,
            "origin_slot": 0,
            "target_id": 202,
            "target_slot": 0,
            "type": "*"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "7accba7e-fd35-4b6c-8f67-b4b565869a78",
        "version": 1,
        "state": {
          "lastGroupId": 9,
          "lastNodeId": 596,
          "lastLinkId": 894,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Apply Color Match",
        "inputNode": {
          "id": -10,
          "bounding": [
            -3890,
            3370,
            122,
            100
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            -3000,
            3360,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "f4ff627e-4f0e-4e7f-8fcb-f9142fef889c",
            "name": "images",
            "type": "IMAGE",
            "linkIds": [
              892
            ],
            "label": "control_video",
            "pos": [
              -3788,
              3390
            ]
          },
          {
            "id": "a9426367-e538-4c1c-b0f6-316489aa2bc8",
            "name": "value",
            "type": "INT",
            "linkIds": [
              890
            ],
            "label": "context_frames",
            "pos": [
              -3788,
              3410
            ]
          },
          {
            "id": "446ad89c-6f15-41ff-aaee-866c8041a805",
            "name": "images_1",
            "type": "IMAGE",
            "linkIds": [
              893
            ],
            "label": "vace_output",
            "pos": [
              -3788,
              3430
            ]
          }
        ],
        "outputs": [
          {
            "id": "59e3d7ff-613d-4c01-b1cd-9ad6df4fd2db",
            "name": "image",
            "type": "IMAGE",
            "linkIds": [
              888
            ],
            "label": "vace_output",
            "pos": [
              -2980,
              3380
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 588,
            "type": "GetImageRangeFromBatch",
            "pos": [
              -3520,
              3370
            ],
            "size": [
              210,
              102
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": 892
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "start_index",
                "name": "start_index",
                "type": "INT",
                "widget": {
                  "name": "start_index"
                },
                "link": 883
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  884
                ]
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": null
              }
            ],
            "title": "Get reference frame",
            "properties": {
              "Node name for S&R": "GetImageRangeFromBatch",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              0,
              1
            ]
          },
          {
            "id": 595,
            "type": "Reroute",
            "pos": [
              -3390,
              3480
            ],
            "size": [
              75,
              26
            ],
            "flags": {},
            "order": 3,
            "mode": 0,
            "inputs": [
              {
                "name": "",
                "type": "*",
                "link": 894
              }
            ],
            "outputs": [
              {
                "name": "",
                "type": "*",
                "links": [
                  886
                ]
              }
            ],
            "properties": {
              "showOutputText": false,
              "horizontal": false
            }
          },
          {
            "id": 593,
            "type": "Basic data handling: IntSubtract",
            "pos": [
              -3630,
              3440
            ],
            "size": [
              210,
              82
            ],
            "flags": {
              "collapsed": true
            },
            "order": 2,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "int1",
                "name": "int1",
                "type": "INT",
                "widget": {
                  "name": "int1"
                },
                "link": 890
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  883
                ]
              }
            ],
            "title": "-1",
            "properties": {
              "Node name for S&R": "Basic data handling: IntSubtract",
              "cnr_id": "basic_data_handling",
              "ver": "1.0.0"
            },
            "widgets_values": [
              0,
              1
            ]
          },
          {
            "id": 596,
            "type": "Reroute",
            "pos": [
              -3630,
              3480
            ],
            "size": [
              75,
              26
            ],
            "flags": {},
            "order": 4,
            "mode": 0,
            "inputs": [
              {
                "name": "",
                "type": "*",
                "link": 893
              }
            ],
            "outputs": [
              {
                "name": "",
                "type": "*",
                "links": [
                  894
                ]
              }
            ],
            "properties": {
              "showOutputText": false,
              "horizontal": false
            }
          },
          {
            "id": 586,
            "type": "ColorMatch",
            "pos": [
              -3280,
              3370
            ],
            "size": [
              210,
              126
            ],
            "flags": {},
            "order": 0,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image_ref",
                "name": "image_ref",
                "type": "IMAGE",
                "link": 884
              },
              {
                "localized_name": "image_target",
                "name": "image_target",
                "type": "IMAGE",
                "link": 886
              }
            ],
            "outputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "links": [
                  888
                ]
              }
            ],
            "properties": {
              "Node name for S&R": "ColorMatch",
              "cnr_id": "comfyui-kjnodes",
              "ver": "ff7f876c09ff5a53be051073c3c1731b96ee31a3"
            },
            "widgets_values": [
              "mkl",
              0.7,
              true
            ]
          }
        ],
        "groups": [],
        "links": [
          {
            "id": 883,
            "origin_id": 593,
            "origin_slot": 0,
            "target_id": 588,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 884,
            "origin_id": 588,
            "origin_slot": 0,
            "target_id": 586,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 886,
            "origin_id": 595,
            "origin_slot": 0,
            "target_id": 586,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 888,
            "origin_id": 586,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 890,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 593,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 892,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 588,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 893,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 596,
            "target_slot": 0,
            "type": "*"
          },
          {
            "id": 894,
            "origin_id": 596,
            "origin_slot": 0,
            "target_id": 595,
            "target_slot": 0,
            "type": "*"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      }
    ]
  },
  "config": {},
  "extra": {
    "frontendVersion": "1.37.11",
    "workflowRendererVersion": "LG",
    "VHS_latentpreview": true,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": false,
    "VHS_KeepIntermediate": true,
    "ds": {
      "scale": 0.5451490849174626,
      "offset": [
        6799.423475861507,
        -2773.542613704139
      ]
    }
  },
  "version": 0.4
}